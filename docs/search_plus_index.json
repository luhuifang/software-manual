{"./":{"url":"./","title":"Overview","keywords":"","body":"OverviewStereoMapNavigationBioinformatics AnalysisOverview StereoMap StereoMap is a desktop application designed to provide the essential analysis functionality you need to explore your Stereo-seq data interactively. Download StereoMapGetting StartedDatasets Navigation Visual Explore Image Processing Tools Orientation of user interface and features. Learn how to processing images manually when the images fail QC, or any of the image registration, tissue segmentation, or cell identification. Orientation of image manually processing step-by-step workflow. Find small tools that assist your analyses on Stereo-seq datasets. Bioinformatics Analysis Stereo-seq T FF Stereo-seq N FFPE Stereo-CITE T FF Learn how to verify image alignment, analyze gene co-expression, extract gene expression matrices for substructures, and more. Learn about annotation based on H&E image and co-visualize the distribution of microbes and host genes. Explore how to visualize multi-omics data using Visual Explore. © 2025 STOmics Tech Co., Ltd. All rights reserved. The products shall be for research use only, not for use in diagnostic procedures. The Content on this manual may be protected in whole or in part by applicable intellectual property laws. STOmics Tech Co., Ltd. and/or corresponding right subjects own their intellectual property rights according to law, including but not limited to trademark rights, copyrights, etc. STOmics Tech Co., Ltd. do not grant or imply the right or license to use any copyrighted content or trademark (registered or unregistered) of us or any third party. Without our written consent, no one shall use, modify, copy, publicly disseminate, change, distribute, or publish the program or Content of this manual without authorization, and shall not use the design or use the design skills to use or take possession of the trademarks, the logo or other proprietary information (including images, text, web design or form) of us or our affiliates. Nothing contained herein is intended to or shall be construed as any warranty, expression or implication of the performance of any products listed or described herein. Any and all warranties applicable to any products listed herein are set forth in the applicable terms and conditions of sale accompanying the purchase of such product. STOmics Tech Co., Ltd. makes no warranty and hereby disclaims any and all warranties as to the use of any third-party products or protocols described herein. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:33 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"download.html":{"url":"download.html","title":"Download","keywords":"","body":"DownloadStereoMap 4.2.0 (Jun., 2025)StereoMap 4.2.0 highlights:System RequirementsPerformance NotesInstallationCompatibility with SAWSettingApplication UpdateSaving PathDownload StereoMap 4.2.0 (Jun., 2025) Download StereoMap If your web browser automatically blocks the installation file, select \"Keep\" to recognize it as a trusted file. StereoMap 4.2.0 highlights: Image Processing: Step 1: No need to enter microscope parameters when uploading QC stitched images. Step 2: Added matrix transparency adjustment for morphological registration. Step 4: Added new automatic model segmentation option for cell segmentation. Tools: Image QC no longer requires microscope parameters for stitched images. In DAPI + mIF QC, calibration evaluation results are no longer a deciding factor for QC pass/fail. Removed QC adaptation for multi-channel fluorescence images. Release Notes -> System Requirements Minimum RequirementsWindowsWindows 10 or later (64-bit)16 GB RAM (minimum 8 GB RAM for Tools-QC)SSD storage highly recommended100% scaling display setting recommendedMacOSCompatible only with the Apple M-series chipsMacOS 11.3 (Big Sur) or later16 GB RAMSSD storage highly recommended Default display settings recommended Performance Notes For large dataset analysis (100K+ cells/bins), 32 GB RAM and a quad-core processor are highly recommended for optimal performance. When working with external storage devices (e.g., external hard drives), performance may be affected due to slower I/O speeds, increased latency, and potential crashes due to unexpected disconnection. Installation StereoMap for Windows is distributed as a self-installing executable (.exe) file. Double-click on the installation file to start installing. If you encounter the following prompt during the installation, you can click \"Open\"，and add it to the trusted file. Follow the prompts to choose an installation directory. The default directory is the local D drive. Before you install, verify that there is enough disk space in the target directory. For both new installation and upgrade, your installation directory must meet the minimum of 20 GB of available disk space. Avoid installing the application in a directory path that has special characters or symbols. The supported characters include space, underscore, letters A - Z, and numbers 0 - 9. Compatibility with SAW SAW >= v8.0 (compatibilty of history versions) Re-run Image QC to convert the compressed TAR (.tar.gz) image file to the latest version. Setting Application Update Click on the setting gear at the top right of the window to open the Setting page. Select About to get the version information and check the updates manually (internet required). If a new version is available, you will be asked to download and install a new package. You can turn on the auto-update option so that the application will check the new versions automatically in the background. Saving Path The default saving path is your installation directory, you may change it to your preferred location from Setting as shown below. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"getting-started.html":{"url":"getting-started.html","title":"Getting Started","keywords":"","body":"Getting StartedWhat is StereoMap?StereoMap Input FilesVisual Explore Input FilesImage Processing Input FilesGetting Started What is StereoMap? StereoMap is a programming-free desktop application that allows you to interactively visualize and explore your Stereo-seq data from STOmics Products. You can use StereoMap to pinpoint the precise locations of genes within a tissue with subcellular resolution, discover molecular expression patterns for single or multiple genes in the original tissue section, and gain insights into the underlying biology. A typical Stereo-seq data analysis workflow involves StereoMap at both upstream and downstream steps. In the upstream, StereoMap offers Image QC and Image Processing tools to assess whether the image can be automatically processed by SAW or manually processed before analyzing with a spatial feature expression matrix. In the downstream, StereoMap provides Visual Explore functions for interactively visualizing and investigating data. Visual Explore: a key module of StereoMap for exploring Stereo-seq dataset. It enables interactive investigation of feature expression distribution across tissue within bins or cells. It also offers the ability to integrate images or multiple omics data for co-visualization or side-by-side visualization to inform downstream analysis. Image Processing: a core function for manipulating images. It allows for the manual alignment of an image with the feature expression matrix, and the execution of tissue and cell segmentation either manually or through the importation of result from external tools. The result can subsequently be transferred to the SAW analysis workflow for standard co-analysis. Tools: complementary tools support the processing of images and Stereo-seq datasets. Stereo-seq Image QC: assesses the quality of microscope images and predicts their suitability for automated analysis in SAW. StereoMap Input Files The microscope image and SAW output files listed below are needed for image processing and visualization. Visual Explore Input Files Download and unzip the SAW output bundled visualization file (visualization.tar.gz), you will find a .stereo manifest file. The .stereo manifest file is required to open any visualization data in StereoMap. It contains information about where to find the visualization files packaged in the SAW output visualization.tar.gz file. To properly open data by manifest file, please follow the rules: Highly recommend keeping the default file structure of the SAW output directory. All the files are managed in the same directory path as the manifest file by default. If a file has been moved to another place or the file name has been changed, remember to modify the corresponding file path in the manifest file. At least a feature expression matrix file (.gef) or an image pyramid file (.rpi) must be available in the directory for the Visual Explore module. File extensionDescription.stereoA manifest file in JSON format that includes experiment and pipeline information, basic analysis statistics, and references to image and spatial matrix files in the SAW output visualization file folder.Unzip the SAW-generated bundle file (visualization.tar.gz) to find this .stereo manifest file. Required to open any SAW pipeline output in StereoMap..gefThe feature expression matrix file in HDF5 format for visualization. It contains the MID count for each gene of each spot. A spot is a binning unit that has a fixed-sized square shape in which the expression value in this square is accumulated. By default, a visualization .gef includes spot sizes of bin 1, 5, 10, 20, 50, 100, 200..cellbin.gefThe cell-feature expression matrix file in HDF5 format for visualization. It contains the spatial location and area of each cell, the MID count for each gene of each cell, and the cluster the cell belongs to. In .cellbin.gef, the cell is the smallest data unit.Only available when the image was processed in SAW pipelines..rpi.rpi file saves one or multiple images in pyramidal format for better visualization. Each image is downsampled into several resolutions and each resolution layer is chopped into 256 pixels × 256 pixels tiles. If the size of a tile or a layer is smaller than 256 pixels × 256 pixels, it will remain intact. A typical SAW-generated .rpi organizes images and tiles sequentially by staining type (ssDNA, DAPI, H&E, or IF name) -> image type (registered image, tissue segmentation binary mask, or cell segmentation binary mask) -> resolution (equivalent resolution size of bin 2, bin 10, bin 50, and bin 100).Required to open any image in StereoMap Visual Explore.*.bin_.h5adA file stores clustering information from the spatial transcriptomics or proteomics dataset in the AnnData file format. A *.bin_.h5ad file is only allowed to contain the analysis results in one bin size. In the file name, stands for the Stereo-seq chip serial number, for bin size, and for leiden resolution. In a typical SAW pipeline, the spatial clustering analysis is processed with a spatial coordinate bin size of 200 and the Leiden resolution of 1.0. If the * immediately following is .protein, it signifies that this file contains clustering results for a protein matrix.*.cellbin_*.h5adThe result of cell clustering information in AnnData file format. In the file name, represents the Stereo-seq chip serial number, corresponds to the Leiden resolution, and * denotes optional content that indicates the cell boundary correction status. If the * part is absent, the .h5ad file contains clustering results based on the feature expression matrix of cell nuclei-covered regions. However, if the * is replaced by .adjusted, the .h5ad file records clustering results based on the feature expression matrix of cell nuclear expression distance, considering a 10-pixel radius until another cell boundary is encountered. In a typical SAW pipeline, the cell clustering analysis is processed with the Leiden resolution of 1.0. If the * immediately following is .protein, it signifies that this file contains clustering results for a protein matrix.Only available when the image was processed in SAW pipelines since the cell location information is derived from microscope images. Image Processing Input Files SAW embeds automated image processing algorithms to stitch image tiles, identify the boundaries of tissue and cells, and detect tracklines on the Stereo-seq chip for aligning the image with the feature expression matrix that also has tracklines. In cases where the tracklines cannot be detected or the tissue/cell boundaries are vague, you may need to manually outline or align. The Image Processing module is designed to address the need for outlining tissue or cells manually or importing results from other tools, as well as manually aligning an image to the feature expression matrix. This manual intervention can be performed on the original microscope image or the SAW automated image detection algorithms processed data. File extensionDescription.tar.gzThe compressed TAR file saves the original microscope images and the QC information.Generated from Tools -> Stereo-seq Image QC..tif or .tiffThe TIFF format image.Microscope stitched image..stereoVisualization manifest file in JSON format that includes information about where to find SAW automated image processing results and feature expression matrix.Unzip the SAW-generated bundle file (visualization.tar.gz) to find this .stereo manifest file. If the .stereo file is the Image Processing module input, at least a compressed image TAR file (.tar.gz) and a feature expression matrix file (.gef) must be available in the directory. Both paths need to be recorded in the manifest file for easy reference. The image .tar.gz file in the SAW output bundle file saves the auto image segmentation and registration records. Depending on the content of the input files, the expected result from Image Processing might be different. More details are described in Navigation for Image Processing. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/navigation.html":{"url":"tutorials/navigation.html","title":"Navigation","keywords":"","body":"NavigationNavigation for Visual ExploreNavigation for Image ProcessingNavigation for ToolsNavigation for Bioinformatics AnalysisNavigation Navigation for Visual Explore Orientation of user interface and features. navigation-for-visual-explore.md Navigation for Image Processing Learn how to processing images manually when the images fail QC, or any of the image registration, tissue segmentation, or cell identification. Orientation of image manually processing step-by-step workflow. navigation-for-image-processing Navigation for Tools Find small tools that assist your Stereo-seq analysis. navigation-for-tools Navigation for Bioinformatics Analysis Learn how to use StereoMap with datasets of different products. bioinformatics-analysis © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/navigation-for-visual-explore.html":{"url":"tutorials/navigation-for-visual-explore.html","title":"Navigation for Visual Explore","keywords":"","body":"Navigation for Visual ExploreAccessing Visual ExploreLoad the DatasetVisual Explore InterfaceCanvasBin Size DropdownDisplay OptionsMouse ToolsLoad and DownloadZoom barFeature MenuLayer Menu and Bin SizesMain Analysis Layer Display OptionsGroup MenuNavigation for Visual Explore Accessing Visual Explore StereoMap's Visual Explore module can be accessed from the start page. Load the Dataset Open StereoMap and click Visual Explore to open your file system, and select .stereo file to load the dataset (see Visual Explore Input Files for more information). Visual Explore Interface The following image shows the layout of the Visual Explore interface. Canvas The Canvas shows the spatial feature expression data as spots overlaid on the ssDNA image of the tissue section, and the workspace tools are floating on the Canvas. Workspace tools: Bin Size Dropdown Click to select a desirable resolution for the spatial feature expression heatmap. Display Options Three options for adjusting the canvas panel and information pane floating on the canvas. From left to right: Setting: show or hide information panes, spot or cell tooltips, canvas navigator, or rotate canvas baseboard. Undo: undo the last selection action. The undo step is limited to 10 steps. Reset: discard all your actions and reset the canvas to its initial state. Mouse Tools Four tools from left to right are: Cursor: the mouse will toggle to the click-and-drag mouse action. Lasso: draw a freehand shape with the lasso selection tool for selecting regions of interest (ROIs). You will need to press Ctrl on your keyboard and use your mouse to draw the shape (release the mouse and press Enter to complete the selection). If you need to draw discontinuous regions, first release and then press Ctrl and mouse again between each draw. To remove an area, hold Alt or Option and draw the region to remove. The Lasso function can be employed alongside the creation of spot groups (see Group Menu for more information). This approach allows for better interpretability and the ability to group related features together. See Characterize Substructure and Generate New Heatmap or Region Annotation Based on H&E Image for more about lasso function. Reference trackline template: click to display the trackline template on the canvas. This is useful in checking whether the microscope-acquired tracklines are accurately overlaid with the reference tracklines derived from a sequencing-based spatial feature expression matrix. See Check Image Alignment for more information. Measure: measure the distance between two mouse clicks in pixels. Load and Download Two options for loading or exporting files. Load file: click to load a complementary file that corresponds to the dataset. Select Load a Lasso Record to upload a .lasso.geojson file, then you can modify the lasso area. Select Load CSV File to upload your differential expression analysis result. A new window will open with your CSV file. Download file: click to open download window for exporting images. You can customize your image prefix name in the file name enter box. You have two options for saving your screen displayed on the canvas: Screenshot Image captures everything currently displayed on the canvas. The quality of the screenshot depends on your display resolution. HD Image saves the image in a higher resolution. If the legend is displayed, it will be saved as a separate image. When you click Export, your file system will open, allowing you to choose an appropriate path. Zoom bar Toggle the zoom bar to zoom in and out the canvas. Feature Menu The Feature menu displays the summarized feature count data. Click the menu bar to expand/collapse the panel. If your canvas shows the spatial map in square bins (such as bin5, bin20, etc), the panel lists the feature name, total MID count, and E10 value. By default, the list is sorted in descending order by MID count, but you can also click the small arrow on the right of each table header to sort by the selected column in ascending or descending order. The E10 score is a measure of how clustered the expression pattern of a feature is. A high E10 value indicates that although the feature is distributed across the tissue region, the significant expression spots are only found in a small area. If the canvas shows the map in the cell bin, the panel lists the feature name, cell count, and total MID count of that feature. Feature distribution in bin20 Feature distribution in cell You can explore the expression of specific features by selecting feature names. Search features: You can look for the specific feature in the search bar. The search is case-insensitive and supports fuzzy search. You can search for multiple features by separating names with commas. Square bin Select one feature: Click the feature name and the feature expression distribution will then be displayed on Canvas. Select multiple features: If you want to select multiple features, just check the checkboxes in front of their feature names. This will allow you to view a summarized expression heatmap for all the selected features. Instead of showing a summarized heatmap, you can explore the co-expression of features by viewing them in different colors (see Co-expression of Selected Genes for more information). Layer Menu and Bin Sizes The Layer menu is responsible for controlling how the data is displayed in the Canvas. Layers are grouped as Image Layer and Main Analysis Layer, and the bin size panel controls the resolution of the feature density map. Image Layer has staining images and segmentation masks registered with the feature expression matrix. Image adjustments include opacity, normalization, brightness, contrast, and color. Options vary based on image type. Normalization adjusts the maximum and minimum value of the image, which helps visualize tracklines. The computation formula is: norm=Xi−min(x)max(x)−min(x)norm=\\frac{X_i-min(x)}{max(x)-min(x)}norm=​max(x)−min(x)​​X​i​​−min(x)​​ Main Analysis Layer includes feature expression matrix view in heatmap, clusters, or UMAP. The cluster or UMAP view is only applicable for limited bin sizes. See Main Analysis Layer Display Options for more information. The layers listed in this category can be opened in a new linked window by clicking in front of the layer name. The windows are usually linked by the spot coordinates. See Microorganism and Host Genes for more information. The linked window can also be manipulated together by pre-defined feature pairs in Stereo-CITE dataset. Visit Spatial Distribution of Protein and its Corresponding Marker Gene for more information. The available bin sizes are 1, 5, 10, 20, 50, 100, 150, 200, and cell bin (only applicable if the dataset contains cell segmentation output). Bin 1 represents one DNB per bin, while Bin 5 represents 5 x 5 DNBs as a binning unit. Cell bin means binning DNBs based on the cell covered regions. There's also an Auto-binsize switch that you can toggle. When you turn on the Auto-binsize mode, the canvas resolution will automatically adjust based on the zoom-in and zoom-out magnification. Main Analysis Layer Display Options Main analysis layers offer varied display options based on projection type and binning, for easy data exploration. Options to adjust the display of the heatmap layers: Heatmap OptionsExplanationBin NCell BinColorChoose the color scheme of the heatmap for better visualization.Spot SizeAdjust the spot size.NAOpacityAdjust the heatmap opacity for simultaneously visualize image layers.MID FilterFilter spots based on MID count. See MID Filtering for more information.Only applicable on selected features.NAColor BarShow or hide the color bar or define the expression range for coloring. By default, the color range goes from 0 to the highest value of any spot in the given bin size. However, you can customize the color range to better visualize bins that fall within a limited feature expression value range.BoundariesShow or hide tissue boundary generated from image or expression matrix. The boundary can be displayed as the outline, filled polygon, or both. The opacity of the filled polygon is adjustable.NADisplay SchemesShow expression distribution of features in summarized heatmap or discrete multi-color. See Co-expression of Selected Genes for more information.NALevel of DetailAdjust the rendering detail and complexity of the heatmap. Slide to 'low', which means keep less detail but more efficiency in rendering. Optionally displayed in bin 1 or bin 5.NA Options to adjust the display of the clustering layers: Cluster & UMAP OptionsExplanationBin NCell BinOpacityAdjust the clustering layer opacity for simultaneously visualize image layers.Form of cells & Outline colorSet cells to appear filled, outlined, or both. The acceptable choices for cell border colors (outlines) include colors assigned by clusters, white, black, and green.NA Group Menu The Group menu lists the spot/region groups. The group includes two types, SAW-generated groups and custom groups. SAW-generated groups list the clusters computed in SAW pipelines (SAW count, SAW realign, SAW reanalyze). You can access the cluster by first choosing the bin size that has been performed clustering, and showing the layer in Cluster. By default, the SAW-generated groups show the clustering in bin size of 200 or cell bin (if the tissue has been segmented into cells based on the image) with the Leiden resolution of 1.0. Edit the Optimization percentage value or drag the slider to adjust the display of the image layer. Click the checkbox in front of the cluster name to hide or show the clusters. Click the color dot to edit the cluster color. You can create a new group coupled with the Lasso function. Use the lasso to select a region, name the region name, and assign the label to the group. Or you can create new groups by clicking + Create a new group and assign the label to the created new group while saving lasso labels. Click after the group name to edit name or export region coordinates in GeoJSON format. You can also export differential expression analysis required parameters by clicking GeoJSON for differential expression. See Differential Expression Analysis for more information. * Click the label name lights up the selected region. The yellow region outline The selected label will be highlighted in yellow, and the corresponding statistic is displayed in the floating panel. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:33 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/navigation-for-image-processing/":{"url":"tutorials/navigation-for-image-processing/","title":"Navigation for Image Processing","keywords":"","body":"Navigation for Image ProcessingWhy Use Images in Spatial AnalysisImage Types and FormatImage Processing RoadmapAccessing Image ProcessingNavigation for Image Processing Why Use Images in Spatial Analysis The expression level of features (such as RNA and proteins) on clinical tissues might be uneven, making it challenging to identify tissue boundaries accurately solely based on the spatial feature expression density heat map. However, microscope images of cell nuclei (such as ssDNA fluorescent staining or DAPI staining) or tissue hematoxylin and eosin (H&E) staining can clearly show the whole tissue region. The use of staining images can significantly improve the outlining of tissue or even cells. After determining the boundaries, precisely align the image with the density map and use the boundary information to obtain a subset density map of tissue or cell region for further analysis. Basic Stereo-seq image processing logic Image Types and Format Here is a summary of StereoMap and SAW support image input types and formats: Image TypesImage FormatMagnification ObjectivesStereo-seq Chip SizeNuclei-staining imagee.g. ssDNA, DAPI8 or 16-bit grayscale single-page image10XUp to 2 cm x 3 cmNuclei-staining + immunofluorescence imagee.g. DAPI + up to 6 IFs8 or 16-bit grayscale single-page image10XUp to 1 cm x 1 cmHematoxlin & Eosin (H&E) staining image24-bit color image10XUp to 1 cm x 1 cm The Stereo-seq chip surface contains tracklines — horizontal and vertical lines arranged at periodic intervals — to aid in base calling and image registration. These tracklines are areas where the capturing probe was unloaded, and will appear as narrow lines on the spatial feature expression density heat map. To ensure optimal image registration and analysis, the tissue staining and imaging SOPs for Stereo-seq technology have been carefully designed and tested. These SOPs minimize any impact on downstream mRNA capture rates while enhancing trackline visibility in microscope images. Since tracklines are present in both the density heat map and the microscope image, they serve as precise position markers for aligning images with spatial expression data. Below are examples illustrating tracklines in both microscope images and the spatial feature expression density heatmap. The images are adjusted to optimize the visibility. Tracklines on fluorescence image Tracklines on color image Tracklines on density heat map Tracklines show as black lines. Tracklines show as lighter white lines. Tracklines show as black lines. SAW incorporates automated image processing algorithms to accurately detect tissue and cell boundaries and identify tracklines on the Stereo-seq chip. These tracklines are essential for aligning microscope images with the spatial feature expression matrix. However, if trackline detection fails or tissue/cell boundaries appear unclear, manual outlining or alignment may be required to ensure precise image registration. Image Processing Roadmap A recommended image-processing roadmap would be: Assess the quality of your microscope image. This step aims to verify the detectability of tracklines, the accuracy of stitched image tiles, and the visibility of tissue structures. This step is a crucial part of the Stereo-seq experiment SOP and involves using the image QC tool to determine whether the image can be automatically processed by SAW. It is highly recommended to perform QC during the experiment to simplify subsequent image analysis. However, QC evaluation is also embedded within the Image Processing module for convenience. For detailed evaluation criteria, please refer to the Image QC page. Register image to spatial feature expression density heat map. Align the microscope image with the spatial feature expression density map, ensuring correct orientation and scaling. If working with multiple immunofluorescence (IF) images, verify the registration of each image individually. Once registered, you can export the intermediate processing result (.tar.gz) and a TIFF format registered image (.tif), which can be used with third-party tools or algorithms for further processing, such as segmentation mask generation. Define tissue and cell boundaries. Use interactive drawing tools, parameter-adjustable semi-automatic tool, or import custom masks created in external software to define ROI regions. For IF images, weak-intensity areas are likely background noise—adjust intensity thresholds to refine ROIs. Thus, pick intensity intervals to specify IF ROIs. Preecise region selection is essential to ensure high-quality data extraction while minimizing background interference. Export operation recording file and let SAW generate spatial feature expression matrices for the defined tissue regions or individual cells. The following pages will demonstrate the step-by-step processing instructions for Stereo-seq support image types. Please follow the guide that matches your request. Accessing Image Processing StereoMap's Image Processing module can be accessed from the start page. Image Processing supports three image types, select the one that matches your image. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:33 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/navigation-for-image-processing/nuclei-staining-image.html":{"url":"tutorials/navigation-for-image-processing/nuclei-staining-image.html","title":"Nuclei-staining Image","keywords":"","body":"Nuclei-staining ImageWhy Nuclei-staining?Considerations for Nuclei-staining ImagesStep 1: Upload ImageStep 2: Image RegistrationMorphology RegistrationFeature Point RegistrationStep 3: Tissue SegmentationStep 4: Cell SegmentationImport a Cell Segmentation MaskParameter-Adjustable Semi-Automatic ToolManual Refinement with Drawing ToolsStep 5: ExportPass the TAR.GZ to SAW PipelineNuclei-staining Image Why Nuclei-staining? Nuclei-staining has no bias in labeling cells in a tissue slice, making it invaluable for determining tissue area and cell location. Stereo-seq experiments and bioinformatics analysis tools are compatible with two stains, ssDNA and DAPI. STOmics R\\&D team has compared and tested various commercialized staining reagents and found that ssDNA staining has the least effect on the downstream mRNA capture rate. The blue-fluorescent DAPI nucleic acid stain is a commonly used nuclear counterstain with high specificity in staining nuclei and can be used alongside other fluorescent reagents. In addition, both ssDNA and DAPI staining allow visualization of tracklines. Considerations for Nuclei-staining Images Processing nuclei-staining images in StereoMap and SAW requires either an individual acquisition stored in a single-page grayscale file at 8 or 16-bit depth . (See Image Types and Format for more information) Fluorescence ImageData Type and File FormatGrayscale imageOne 8 or 16-bit grayscale single-page image file. Step 1: Upload Image Click on Choose file in the drag-and-drop box to select a compatible image file from your file system, or drag and drop the file into the box. Only one image file is allowed for this image type. Please visit Image Processing Input Files for detailed image file information. After selecting a file, the system will parse the image and extract necessary data. Parsing time may vary depending on the file type and size. Stereo-seq chip serial number (SN) and microscope setting provide important information in the image processing steps. The .tar.gz or .stereo the input file contains these data, so the parsing process will start directly. If your input file is is .tif or .tiff, you'll need to manually enter the required information specified in this step and click Confirm to begin parsing and quality check. Once parsing and quality checks are complete, click Next to proceed to Step 2. Step 2: Image Registration In this step, you will need to adjust the orientation, position, and scale of the image to align it with the spatial feature expression matrix. StereoMap provides two registration approaches for aligning images in the context of Stereo-seq data analysis. Morphology Registration: Aligns image with matrix based on the similarity of their morphology. Feature Point Registration: Aligns image to the trackline template deduced from the Stereo-seq chip SN by marking a key point. There’s no need to bring in a spatial feature expression matrix generated by SAW, but some prerequisites should be taken into account. Morphology Registration If you uploaded a .stereo file in Step 1, both the image and the spatial feature expression matrix will be visible in Step 2. For .tar.gz or .tif/.tiff image file, you will need to add a .stereo file to specify a spatial feature expression matrix as the reference. Click to select the .stereo file. Or, if your image is in the .stereo file, but you want to change the reference expression matrix, you can click the and load a new file. This action will reload the matrix, but use the image from step 1. The registration process involves two stages: Rough Alignment: Match the orientation of the image based on morphology. Use the Flip tool to mirror the image. Click on and use the Control knob to rotate the image accordingly. Fine Alignment: Adjust the position and scale for exact overlap with the spatial feature expression map. Use the Move panel by setting the step size and pan in four directions. Adjust scales using the Scale tool to match the dimensions of the microscope image with the spatial feature expression map. Click\"Chip tracklines\" to display tracklines derived from the spatial feature expression matrix to assist with fine alignment. This template is a representation of the matrix. If the tracklines on the image appear dim, manually adjust the Normalization , Contrast , Brightness , and Opacity . The images are adjusted to optimize the visibility of tracklines. Example of trackline overlapping Adjusting Saturation will not affect the grayscale image. The image that has been adjusted will be marked as complete by . After the image has been aligned with the matrix, steps 3 and 4 can be bypassed. You can export the semi-processed .tar.gz image directly and feed this output to SAW for automatic segmentation. In addition, a *regist.tif image file will be provided. This is a reoriented image that matches the shape and orientation of its corresponding feature expression matrix. This image serves as the starting point for tissue and cell segmentation. If you’re considering using other external segmentation tools or algorithms, it’s strongly advised to utilize this *regist.tif file as the input. Feature Point Registration Registration with feature points involves aligning images without the need for a feature expression matrix. It uses tracklines detected from the image and lines from the chip mask according to predefined rules. Prerequisite to accessing this approach: Image must pass QC: this ensures the tracklines are visible. Valid Stereo-seq chips that follow the predefined rules: Stereo-seq N FFPE V1.0, Stereo-seq T FF V1.3, or Stereo-CITE T V1.1 chips. Input .tar.gz or the .stereo file correspondent .tar.gz is generated from StereoMap >= 4.1. To ensure that the two sets of lines match, you must also identify a specific point to indicate the orientation of the image; otherwise, the auto-alignment may fail. Requirements to select the correct feature point and get the correct registration result: The tissue's orientation in the image matches its placement on the slide, with the slide's engraved label on the right. The maximum tilting angle allowed is less than 15°. The four chip edges/corners can be seen from the image. The imaging process has strictly followed the instructions specified in Microscope Assessment Guideline - Chapter 3 Microscope Imaging Guidelines - 3.2.2. Precautions for Experimental Operations. You can access it from STOmics -> Resources Documents. If your image cannot fulfill all the requirements, we highly recommend you perform the Morphology Registration. Feature point registration begins with an image that has been adjusted for rotation and scaling. The process of feature point registration involves two stages: Adjusting Image Visibility: To ensure all four edges and corners of the chip are clearly visible. Selecting a Reference Point: To set it as the reference. To ensure all four sides of the chip are visible, you can manually adjust the image's Normalization , Contrast , Brightness , and Opacity . Once you can see the chip, you should identify a predetermined point inside the chip region that is nearest to the bottom left corner. Click on this point to select it, and then click Next to complete the registration. After selection, the orientation of the image will be auto-adjusted. You will see the result in Step 3: Tissue Segmentation. After the image has been aligned with the matrix, steps 3 and 4 can be bypassed. You can export the semi-processed .tar.gz image directly and feed this output to SAW for automatic segmentation. In addition, a *regist.tif image file will be provided. This is a reoriented image that matches the shape and orientation of its corresponding feature expression matrix. This image serves as the starting point for tissue and cell segmentation. If you’re considering using other external segmentation tools or algorithms, it’s strongly advised to utilize this *regist.tif file as the input. Other.tif file may fail to import due to the difference in image and matrix size. Step 3: Tissue Segmentation Tissue Segmentation is a skippable step. In this step, you will define the tissue regions. Precisely identifying tissue boundaries helps minimize background interference, improving the accuracy of clustering results. The segmented tissue regions from the image will be mapped onto the sequencing-based spatial feature expression matrix, generating a feature density map for the tissue. If you upload the .stereo file in step 1, you can see a semi-transparent mask overlapped on the registered microscope image. For .tar.gz or .tif/.tiff image file, you will need to use tools to draw the tissue region. In the Tissue Segmentation step, you can edit the recorded mask or create a new one. The tissue mask recorded in the .tar.gz or .stereo file appears as \"RECORD\" in the Segmentation mask dropdown, while manually drawn or imported masks are labeled as \"CUSTOM\". Select a mask from the dropdown to update the canvas display. To select or edit the tissue region, use a combination of Lasso , Brush , and Eraser tools. Lasso Tool: This tool is typically used for selecting or deselecting large areas. It allows you to draw a freehand selection around the region of interest. Brush Tool: This tool is more suitable for smaller areas, such as regions around tissue or fill in small holes in the tissue. It allows you to paint over specific areas to include or exclude them from the selection. Eraser Tool: Similar to the Brush tool, the Eraser tool is used for smaller areas. It allows you to remove or deselect specific regions within the larger selection. Lasso Brush Eraser If you have created a .tif format binary mask file using a third-party tool, you can import it by: Click on the Segmentation Mask dropdown menu on the right panel. Select Add Mask in the CUSTOM category to import mask. Navigate to your .tif binary mask file from your file system and click Open to import it. If the imported result is unsatisfactory, you can replace it with a new mask Click on the Segmentation Mask dropdown menu again. Select the option with in the CUSTOM category to replace mask. Navigate to your .tif binary mask file from your file system and click Open to import it. Import tissue mask Show the file name of the imported mask Replace the mask Step 4: Cell Segmentation Cell Segmentation is a skippable step. Cell segmentation is a key step in generating single-cell spatially resolved feature expression data. If you upload the .stereo file in step 1, you can see the red outlines of the cells/nuclei on the registered microscope image. For .tar.gz or .tif/.tiff image file, you will need to use tools to label cells. Cell segmentation is applicable only within the tissue region. Therefore, the areas not encompassed in the Step 3 Tissue Segmentation will appear as a black background. Similar to Step3 Tissue Segmentation, you can edit a previously recorded mask (\"RECORD\") or create a new one (\"CUSTOM\") by selecting from the Segmentation Mask dropdown. Change the active mask by selecting from the Segmentation mask dropdown. StereoMap offers three ways to refine your cell segmentation: Import a Cell Segmentation Mask\\ Use third-party tools or algorithms to segment cells on your registered image and import the result for Stereo-seq analysis. This method is best if you have high-quality segmentation results from third-party tools and want to seamlessly integrate them into your Stereo-seq analysis. It is ideal for large datasets or when using advanced segmentation models. Parameter-Adjustable Semi-Automatic Tool\\ This method allows you to apply automated segmentation across the entire tissue or within a selected region, with adjustable parameters for optimization. It is recommended when you need a quick and efficient way to refine segmentation while maintaining flexibility. This approach works well when the initial segmentation is decent but requires parameter tuning to improve accuracy, especially in cases with variable cell density. Manual Refinement with Drawing Tools\\ Using drawing tools like the lasso, brush, and eraser for precise manual cell segmentation adjustments. This method is most suitable for precise corrections in small regions, such as separating clustered cells, correcting segmentation errors, or handling complex regions where automated methods struggle. It is ideal for small datasets or cases requiring detailed, cell-by-cell refinement. Import a Cell Segmentation Mask If you have already segmented cells using external tools, you can easily import the .tif format segmentation mask generated from the registered image and use it directly in your Stereo-seq analysis. Click on the Segmentation Mask dropdown menu on the right panel. Select Add Mask in the CUSTOM category to import mask. Navigate to your .tif binary mask file from your file system and click Open to import it. If the imported result is unsatisfactory, you can replace it with a new mask Click on the Segmentation Mask dropdown menu again. Select the option with in the CUSTOM category to replace mask. Navigate to your .tif binary mask file from your file system and click Open to import it. Import cell mask Show the file name of the imported mask Replace the mask Parameter-Adjustable Semi-Automatic Tool The parameter-adjustable semi-automatic tool provides a balance between automation and control, allowing you to refine segmentation by adjusting key parameters to better fit your tissue sample. Click on the Automated Segmentation dropdown menu on the right panel, and choose Watershed. Once selected, the Box select mouse tool will be activated and ready for use. Use the Box select mouse tool to select your region of interest (ROI) area where you want to fine-tune the segmentation. This will trigger the Watershed Parameters settings dialog to pop up. In the pop-up Watershed Parameters settings dialog, modify key parameters to optimize segmentation for your ROI. Refer to Understanding Segmentation Parameters and Tips to Optimizing Segmentation Results for more information. After adjusting the parameters, click Apply to implement the changes. Wait for the segmentation outcome to process and review the results. If you are satisfied with the segmentation of most cells, you can further refine any misclassified cells using the drawing tools (lasso, brush, or eraser). Alternatively, if you're satisfied with the segmentation, click Next to proceed to the final step. Be aware that the automated tool only updates the segmentation within your selected region, so cells at the edges of the selection box will have rigid boundaries. To avoid this issue, you can either select the entire tissue region to ensure smooth segmentation across the tissue, or use the drawing tools to fix any misclassified cells while maintaining the accuracy of the rest of the segmentation. Manual Refinement with Drawing Tools This method provides the highest level of precision, manually edit the segmentation using Lasso , Brush , and Eraser tools to fine-tune individual cell boundaries. Lasso: Best for deselecting large areas, such as the background. Brush & Eraser: Ideal for refining smaller areas, such as marking cells, or separating cell clusters. Lasso to select a cell Lasso to deselect some cells Brush Eraser Step 5: Export The final step is to export the results of image registration, tissue segmentation, and cell segmentation. Click Export image processing record to generate a .tar.gz file. Click on the export will open your file system, and you will be allowed to select a saving path. There are two types of export files: *.tar.gz File: This file stores your original image along with all manual adjustments you made. It’s essential for SAW to combine sequencing data with image analysis. The internal structure of the .tar.gz is fixed, therefore to keep everything working smoothly, modifying it is not recommended. *regist.tif File: If you manually adjusted the image alignment, this file will be saved in your output folder (or in the /outs/ directory of SAW). The TIFF format makes it easy to use in third-party tools. This image has been cropped and resized to match the feature expression matrix dimensions, ensuring that any data generated from it using external tools can also be re-imported into StereoMap for further analysis. Pass the TAR.GZ to SAW Pipeline There are two options for transferring the output of Image Processing to SAW. Using --image-tar in the SAW count Pipeline This option is to use the --image-tar argument to feed the .tar.gz file into the SAW count pipeline This will process the .tar.gz file along with the Stereo-seq FASTQ files. The final output includes an HTML summary report with integrated sequencing and imaging data. cd /saw/runs saw count \\ --id= \\ --sn= \\ --omics= \\ --kit-version= \\ --sequencing-type= \\ --chip-mask=/path/to/chip/mask \\ --organism= \\ --tissue= \\ --fastqs=/path/to/fastq/folders \\ --reference=/path/to/reference/folder \\ --image-tar=/path/to/image/tar Using --realigned-image-tar in the SAW realign Pipeline This option is to use the --realigned-image-tar argument to input the .tar.gz file into the SAW realign pipeline SAW realign skips CID mapping and genome alignment. It re-generates aligned images and extracts the feature expression matrix at both tissue and cell level The pipeline produces an updated HTML report with refined segmentation and spatial expression data. cd /saw/runs saw realign \\ --id= \\ --sn= \\ --count-data=/path/to/previous/SAW/count/task/folder/id \\ --realigned-image-tar=/path/to/realigned/image/tar © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/navigation-for-image-processing/nuclei-staining-+-immunofluorescence-image.html":{"url":"tutorials/navigation-for-image-processing/nuclei-staining-+-immunofluorescence-image.html","title":"Nuclei-staining + Immunofluorescence Image","keywords":"","body":"Nuclei-staining + Immunofluorescence ImageWhy Nuclei-staining + Immunofluorescence Image?Considerations for Nuclei-staining Images and Immunofluorescence ImagesStep 1: Upload ImageStep 2: Image RegistrationMorphology RegistrationFeature Point RegistrationStep 3: Tissue SegmentationSegmentation of the Nuclei-staining imageSegmentation of the IF imagesStep 4: Cell SegmentationImport a Cell Segmentation MaskParameter-Adjustable Semi-Automatic ToolManual Refinement with Drawing ToolsStep 5: ExportPass the TAR.GZ to SAW PipelineNuclei-staining + Immunofluorescence Image Why Nuclei-staining + Immunofluorescence Image? Immunofluorescence (IF) is a widely used image-based technique to visualize the subcellular distribution of the proteome in cells. For instance, nuclei can be stained with DAPI, while T cells can be identified using CD3. Multiplex IF (mIF) can be tagged on the tissue section and scanned by the fluorescence microscope simultaneously. Stereo-seq experiments and bioinformatics analysis tools are compatible with DAPI and up to 6 user-defined IFs, enabling spatial discovery across a tissue sample. Considerations for Nuclei-staining Images and Immunofluorescence Images Since each of the selected IFs has a specific fluorescence spectrum and all of them are applied together on the same tissue slice, there are several challenges to consider, especially in the IF selection and imaging platform. Each IF has a specific fluorescence spectrum and it's essential to manage the degree of spectral overlap among the IFs you choose. Additionally, it is crucial to consider the available emission and excitation filters of your imaging platform. The fluorescence microscope scans tissue areas with IF tags either by switching the filter at the same scan area until the whole tissue area has been reached or by switching the filter after scanning the entire tissue area. Both methods require keeping the chip in place without any movement between each scan to ensure the tissue position in the IF images remains consistent in terms of both scale and orientation. Processing nuclei-staining + mIF images in StereoMap and SAW requires a set of individual acquisitions stored in a single-page grayscale file at 8 or 16-bit depth. (See Image Types and Format for more information) Fluorescence ImageData Type and File FormatGrayscale imageMultiple 8 or 16-bit grayscale single-page image files Step 1: Upload Image Click on Choose file in the drag-and-drop box to upload a compatible image file from your file system, or drag and drop the file(s) into the box. If your input image file is either a .tar.gz or a .stereo file, drag and drop it only once to the left-side box. However, if your input file format is .tif or .tiff, you need to drop your nuclei-staining DAPI image to the left-side box and select and drop all your IF images to the right-side box together. Please visit Image Processing Input Files for detailed image file information. After selecting a file, the system will parse the image and extract necessary data. Parsing time may vary depending on the file type and size. Stereo-seq chip serial number (SN) and microscope setting provide important information in the image processing steps. The .tar.gz or .stereo the input file contains these data, so the parsing process will start directly. If your input file is is .tif or .tiff, you'll need to manually enter the required information specified in this step and click Confirm to begin parsing and quality check. Once parsing and quality checks are complete, click Next to proceed to Step 2. Step 2: Image Registration In this step, you will need to adjust the orientation, position, and scale of the image to align each of them with the spatial feature expression matrix. StereoMap provides two registration approaches for aligning images in the context of Stereo-seq data analysis. Morphology Registration: Aligns image with matrix based on the similarity of their morphology. Feature Point Registration: Aligns image to the trackline template deduced from the Stereo-seq chip SN by marking a key point. There’s no need to bring in a spatial feature expression matrix generated by SAW, but some prerequisites should be taken into account. Morphology Registration If you upload the .stereo file in step 1, you can see the image and the spatial feature expression matrix once enter step 2. For .tar.gz or .tif/.tiff image file, you will need to add a .stereo file for specifying a spatial feature expression matrix as the reference. Click to select the .stereo file. Or, if your images are in the .stereo file, but you want to change the reference expression matrix, you can click the and load a new file. This action will reload the matrix, but use the images from step 1. The registration process involves two stages, roughly matching the orientation of the image based on the morphology and finely adjusting the position and scale for exact overlap with the the spatial feature expression map. You can also choose \"Chip tracklines\" to display tracklines that are derived from the spatial feature expression matrix to help with fine alignment. To roughly align the image, you need to match the microscope image and the feature density map in orientation. Use the Flip tool to mirror the image. Click on and use the Control knob to rotate the image in the same direction. Once the orientation of the image and the spatial feature expression matrix have matched, you can move on to the fine-alignment steps. In the fine-alignment stage, you will need to move the image to the place where the tissue can overlap. Use the Move panel by setting the step size and pan move in four directions. The dimension of the microscope image might differ from the spatial feature expression map, you can adjust scales using the Scale tool. You can align the image by checking \"Chip tracklines\" to show the reference trackline template and let the tracklines fall directly overlapped. At this time, the chip trackline template is a representation of the matrix. If the tracklines are dim, the Normalization , Contrast , Brightness , and Opacity of the image can be adjusted manually. In the case of IF images, the tracklines might not be visible directly from the image. However, altering the matrix color could help to bring out some hidden patterns. The images are adjusted to optimize the visibility of tracklines. Example of trackline overlapping Adjusting Saturation will not affect the grayscale image. For IF images in which the tracklines cannot be seen, we assume that the IFs were taken in exactly the same orientation as the nuclei-staining image. Since StereoMap >=4.1, the parameters from the nuclei-staining image will be automatically applied to all the IFs. After the image has been aligned with the matrix, steps 3 and 4 can be bypassed. You can export the semi-processed .tar.gz image directly and feed this output to SAW for automatic segmentation. In addition, a *regist.tif image file will be provided. This is a reoriented image that matches the shape and orientation of its corresponding feature expression matrix. This image serves as the starting point for tissue and cell segmentation. If you’re considering using other external segmentation tools or algorithms, it’s strongly advised to utilize this *regist.tif file as the input. Feature Point Registration Registration with feature points involves aligning images without the need for a feature expression matrix. It uses tracklines detected from the image and lines from the chip mask according to predefined rules. Prerequisite to accessing this approach: Image must pass QC: this ensures the tracklines are visible. Valid Stereo-seq chips that follow the predefined rules: Stereo-seq N FFPE V1.0, Stereo-seq T FF V1.3, or Stereo-CITE T V1.1 chips. To ensure that the two sets of lines match, you must also identify a specific point to indicate the orientation of the image; otherwise, the auto-alignment may fail. Requirements to select the correct feature point and get the correct registration result: The tissue's orientation in the image matches its placement on the slide, with the slide's engraved label on the right. The maximum tilting angle allowed is less than 15°. The four chip edges/corners can be seen from the image. The imaging process has strictly followed the instructions specified in Microscope Assessment Guideline - Chapter 3 Microscope Imaging Guidelines - 3.2.2. Precautions for Experimental Operations. You can access it from STOmics -> Resources Documents. If your image cannot fulfill all the requirements, we highly recommend you perform the Morphology Registration. Feature point registration begins with an image that has been adjusted for rotation and scaling. The process of feature point registration involves two stages: Adjusting Image Visibility: To ensure all four edges and corners of the chip are clearly visible. Selecting a Reference Point: To set it as the reference. To ensure all four sides of the chip are visible, you can manually adjust the image's Normalization , Contrast , Brightness , and Opacity . Once you can see the chip, identify a predetermined point within the chip region that is nearest to the bottom-left corner. Click on this point to select it, and then click Next to complete the registration. Once the reference point is selected, the system will automatically adjust the image's orientation. The aligned result will be displayed in Step 3: Tissue Segmentation. Once the image is aligned with the matrix, Steps 3 and 4 can be skipped. You can export the semi-processed .tar.gz file and use it as input for SAW to perform automatic segmentation. Additionally, a _regist.tif file will be generated. This reoriented image is adjusted to match the shape and orientation of its corresponding feature expression matrix, serving as the starting point for tissue and cell segmentation. If you plan to use other segmentation tools or algorithms, it is strongly recommended to use the _regist.tif file as input, as other .tif files may fail to import due to discrepancies in image and matrix dimensions. Step 3: Tissue Segmentation Tissue Segmentation is a skippable step. In this step, you will define the tissue regions. Precisely identifying tissue boundaries helps minimize background interference, improving the accuracy of clustering results. The segmented tissue regions from the image will be mapped onto the sequencing-based spatial feature expression matrix, generating a feature density map for the tissue. For IF images, focus on regions with strong immunofluorescence intensity rather than strict tissue boundaries. If you upload the .stereo file in step 1, you can see a semi-transparent mask overlapped on the registered microscope image. For .tar.gz or .tif/.tiff image file, you will need to use tools to draw the tissue region. Segmentation of the Nuclei-staining image In the Tissue Segmentation step, you can edit the recorded mask or create a new one. The panel of tissue identification for the nuclei-staining image is under the Tissue Seg tab. The tissue mask recorded in the .tar.gz or .stereo file appears as \"RECORD\" in the Segmentation mask dropdown, while manually drawn or imported masks are labeled as \"CUSTOM\". Select a mask from the dropdown to update the canvas display. To select or edit the tissue region, use a combination of Lasso , Brush , and Eraser tools. Lasso Tool: This tool is typically used for selecting or deselecting large areas. It allows you to draw a freehand selection around the region of interest. Brush Tool: This tool is more suitable for smaller areas, such as regions around tissue or fill in small holes in the tissue. It allows you to paint over specific areas to include or exclude them from the selection. Eraser Tool: Similar to the Brush tool, the Eraser tool is used for smaller areas. It allows you to remove or deselect specific regions within the larger selection. Lasso Brush Eraser If you have created a .tif format binary mask file using a third-party tool, you can import it by: Click on the Segmentation Mask dropdown menu on the right panel. Select Add Mask in the CUSTOM category to import mask. Navigate to your .tif binary mask file from your file system and click Open to import it. If the imported result is unsatisfactory, you can replace it with a new mask Click on the Segmentation Mask dropdown menu again. Select the option with in the CUSTOM category to replace mask. Navigate to your .tif binary mask file from your file system and click Open to import it. Import tissue mask Show the file name of the imported mask Replace the mask Segmentation of the IF images To identify regions where the protein is actively expressed from the IF images, go to the Gray Scale tag. First, select the active IF image from the Immunofluorescence image dropdown. Then, adjust the sliders for the Fluorescence intensity threshold. The pixels in the image whose values fall within the selected range will be kept as the region of the IF. Step 4: Cell Segmentation Cell Segmentation is a skippable step. Cell segmentation is a key step in generating single-cell spatially resolved feature expression data. In the current version, cell segmentation is only performed on the nuclei-staining image. If you upload the .stereo file in step 1, you can see the red outlines of the cells/nuclei on the registered microscope image. For .tar.gz or .tif/.tiff image file, you will need to use tools to label cells. Cell segmentation is applicable only within the tissue region. Therefore, the areas not encompassed in the Step 3 Tissue Segmentation will appear as a black background. Similar to Tissue Segmentation, you have the option to edit the mask that was previously recorded (tagged with \"RECORD\") or create a new one (tagged with \"CUSTOM\"). Change the active mask by selecting from the Segmentation mask dropdown. StereoMap offers three ways to refine your cell segmentation: Import a Cell Segmentation Mask\\ Use third-party tools or algorithms to segment cells on your registered image and import the result for Stereo-seq analysis. This method is best if you have high-quality segmentation results from third-party tools and want to seamlessly integrate them into your Stereo-seq analysis. It is ideal for large datasets or when using advanced segmentation models. Parameter-Adjustable Semi-Automatic Tool\\ This method allows you to apply automated segmentation across the entire tissue or within a selected region, with adjustable parameters for optimization. It is recommended when you need a quick and efficient way to refine segmentation while maintaining flexibility. This approach works well when the initial segmentation is decent but requires parameter tuning to improve accuracy, especially in cases with variable cell density. Manual Refinement with Drawing Tools\\ Using drawing tools like the lasso, brush, and eraser for precise manual cell segmentation adjustments. This method is most suitable for precise corrections in small regions, such as separating clustered cells, correcting segmentation errors, or handling complex regions where automated methods struggle. It is ideal for small datasets or cases requiring detailed, cell-by-cell refinement. Import a Cell Segmentation Mask If you have already segmented cells using external tools, you can easily import the .tif format segmentation mask generated from the registered image and use it directly in your Stereo-seq analysis. Click on the Segmentation Mask dropdown menu again. Select the option with in the CUSTOM category to replace mask. Navigate to your .tif binary mask file from your file system and click Open to import it. If the imported result is unsatisfactory, you can replace it with a new mask Click on the Segmentation Mask dropdown menu on the right panel. Select Add Mask in the CUSTOM category to import mask. Navigate to your .tif binary mask file from your file system and click Open to import it. Import cell mask Show the file name of the imported mask Replace the mask Parameter-Adjustable Semi-Automatic Tool The parameter-adjustable semi-automatic tool provides a balance between automation and control, allowing you to refine segmentation by adjusting key parameters to better fit your tissue sample. Click on the Automated Segmentation dropdown menu on the right panel, and choose Watershed. Once selected, the Box select mouse tool will be activated and ready for use. Use the Box select mouse tool to select your region of interest (ROI) area where you want to fine-tune the segmentation. This will trigger the Watershed Parameters settings dialog to pop up. In the pop-up Watershed Parameters settings dialog, modify key parameters to optimize segmentation for your ROI. Refer to Understanding Segmentation Parameters and Tips to Optimizing Segmentation Results for more information. After adjusting the parameters, click Apply to implement the changes. Wait for the segmentation outcome to process and review the results. If you are satisfied with the segmentation of most cells, you can further refine any misclassified cells using the drawing tools (lasso, brush, or eraser). Alternatively, if you're satisfied with the segmentation, click Next to proceed to the final step. Be aware that the automated tool only updates the segmentation within your selected region, so cells at the edges of the selection box will have rigid boundaries. To avoid this issue, you can either select the entire tissue region to ensure smooth segmentation across the tissue, or use the drawing tools to fix any misclassified cells while maintaining the accuracy of the rest of the segmentation. Manual Refinement with Drawing Tools For the highest level of precision, manually edit the segmentation using Lasso , Brush , and Eraser tools to fine-tune individual cell boundaries. Lasso: Best for deselecting large areas, such as the background. Brush & Eraser: Ideal for refining smaller areas, such as marking cells, or separating cell clusters. Lasso to select a cell Lasso to deselect some cells Brush Eraser Step 5: Export The final step is to export the results of image registration, tissue segmentation, and cell segmentation. Click Export image processing record to generate a .tar.gz file. Click on the export will open your file system, and you will be allowed to select a saving path. There are two types of export files: *.tar.gz File: This file stores your original image along with all manual adjustments you made. It’s essential for SAW to combine sequencing data with image analysis. The internal structure of the .tar.gz is fixed, therefore to keep everything working smoothly, modifying it is not recommended. *regist.tif File: If you manually adjusted the image alignment, this file will be saved in your output folder (or in the /outs/ directory of SAW). The TIFF format makes it easy to use in third-party tools. This image has been cropped and resized to match the feature expression matrix dimensions, ensuring that any data generated from it using external tools can also be re-imported into StereoMap for further analysis. Pass the TAR.GZ to SAW Pipeline There are two options for transferring the output of Image Processing to SAW. Using --image-tar in the SAW count Pipeline This option is to use the --image-tar argument to feed the .tar.gz file into the SAW count pipeline This will process the .tar.gz file along with the Stereo-seq FASTQ files. The final output includes an HTML summary report with integrated sequencing and imaging data. cd /saw/runs saw count \\ --id= \\ --sn= \\ --omics= \\ --kit-version= \\ --sequencing-type= \\ --chip-mask=/path/to/chip/mask \\ --organism= \\ --tissue= \\ --fastqs=/path/to/fastq/folders \\ --reference=/path/to/reference/folder \\ --image-tar=/path/to/image/tar Using --realigned-image-tar in the SAW realign Pipeline This option is to use the --realigned-image-tar argument to input the .tar.gz file into the SAW realign pipeline SAW realign skips CID mapping and genome alignment. It re-generates aligned images and extracts the feature expression matrix at both tissue and cell level The pipeline produces an updated HTML report with refined segmentation and spatial expression data. cd /saw/runs saw realign \\ --id= \\ --sn= \\ --count-data=/path/to/previous/SAW/count/task/folder/id \\ --realigned-image-tar=/path/to/realigned/image/tar © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/navigation-for-image-processing/hematoxylin-and-eosin-staining-image.html":{"url":"tutorials/navigation-for-image-processing/hematoxylin-and-eosin-staining-image.html","title":"Hematoxylin & Eosin Staining Image","keywords":"","body":"Hematoxylin & Eosin Staining ImageWhy Hematoxylin & Eosin Staining Image?Considerations for H&E Staining ImagesStep 1: Upload ImageStep 2: Image RegistrationMorphology RegistrationFeature Point RegistrationStep 3: Tissue SegmentationStep 4: Cell SegmentationImport a Cell Segmentation MaskParameter-Adjustable Semi-Automatic ToolManual Refinement with Drawing ToolsStep 5: ExportPass the TAR.GZ to SAW PipelineHematoxylin & Eosin Staining Image Why Hematoxylin & Eosin Staining Image? Hematoxylin and eosin stain (H&E stain) is a widely used tissue stain that provides histologic information for medical diagnosis and is considered the gold standard. Hematoxylin mainly stains cell nuclei in purplish blue, and eosin colors cytoplasm and extracellular matrix in different shades of pink. By integrating spatially resolved sequencing-based feature data generated from Stereo-seq with the H&E staining image, the morphology of cells can be linked with spatially localized feature expression. The combined use of histology images and feature expression co-representation increases the amount of information that a tissue slice can provide. Considerations for H&E Staining Images Stereo-seq chip is a non-transparent silicon chip, so the H&E stained image should be scanned by a bright-field microscope using reflective light. The background color of the H&E image is close to white, and the representation of tracklines is lighter white. Different from fluorescence images, which only illustrate relatively simple information with shades of gray, H&E staining images provide sophisticated histopathology information by combining R-G-B colors. Therefore, the file size of an RGB image is much larger than a grayscale image in the same dimensions, and the required computing resources are much higher. Currently, StereoMap requires a minimum of 16GB RAM, which is only sufficient for processing a 24-bit color, 10X objective image for a 1 cm x 1 cm chip. Processing H&E images in StereoMap and SAW requires an individual acquisition stored in a single-page color file at 24-bit depth. (See Image Types and Format for more information) Bright-field ImageData Type and File FormatColor imageOne 24-bit color single-page image file Step 1: Upload Image Click on Choose file in the drag-and-drop box to select a compatible image file from your file system. You can also drag your selected file and drop it in the box. Only one image file is allowed for this image type. Please visit Image Processing Input Files for detailed image file information. Selecting a file triggers a file-parsing process that not only reads the image but also acquires necessary data from the input. Depending on the file type and image size, the parsing time can vary. Stereo-seq chip serial number (SN) and microscope setting provide important information in the image processing steps. The .tar.gz or .stereo the input file contains these data, so the parsing process will start directly. If your input file is is .tif or .tiff, you'll need to manually enter the required information specified in this step and click Confirm to begin parsing and quality check. Once parsing and quality checks are complete, click Next to proceed to Step 2. Step 2: Image Registration In this step, you will need to adjust the orientation, position, and scale of the image to align it with the spatial feature expression matrix. StereoMap provides two registration approaches for aligning images in the context of Stereo-seq data analysis. Morphology Registration: Aligns image with matrix based on the similarity of their morphology. Feature Point Registration: Aligns image to the trackline template deduced from the Stereo-seq chip SN by marking a key point. There’s no need to bring in a spatial feature expression matrix generated by SAW, but some prerequisites should be taken into account. Morphology Registration If you upload the .stereo file in step 1, you can see the image and the spatial feature expression matrix once enter step 2. For .tar.gz or .tif/.tiff image file, you will need to add a .stereo file for specifying a spatial feature expression matrix as the reference. Click to select the .stereo file. Also, if your image is in the .stereo file, but you need to change the reference expression matrix, you can click the and load a new file. This action will reload the matrix, but use the image from step 1. The registration process involves two stages, roughly matching the orientation of the image based on the morphology and finely adjusting the position and scale for exact overlap with the spatial feature expression map. You can also choose \"Chip tracklines\" to display tracklines that are derived from the spatial feature expression matrix to help with fine alignment. To roughly align the image, you need to match the microscope image and the feature density map in orientation. Use the Flip tool to mirror the image. Click on and use the Control knob to rotate the image in the same direction. Once the orientation of the image and the spatial feature expression matrix have matched, you can move on to the fine-alignment steps. In the fine-alignment stage, you will need to move the image to the place where the tissue can overlap. Use the Move panel by setting the step size and pan move in four directions. The dimension of the microscope image might differ from the spatial feature expression map, you can adjust scales using the Scale tool. You can align the image by checking \"Chip tracklines\" to show the reference trackline template and let the tracklines fall directly overlapped. At this time, the chip trackline template is a representation of the matrix. If the tracklines are dim, the Normalization , Contrast , Brightness , Opacity , and Saturation of the image can be adjusted manually. The images are adjusted to optimize the visibility of tracklines. Example of trackline overlapping The image that has been adjusted will be marked as complete by . After the image has been aligned with the matrix, steps 3 and 4 can be bypassed. You can export the semi-processed .tar.gz image directly and feed this output to SAW for automatic segmentation. In addition, a *regist.tif image file will be provided. This is a reoriented image that matches the shape and orientation of its corresponding feature expression matrix. This image serves as the starting point for tissue and cell segmentation. If you’re considering using other external segmentation tools or algorithms, it’s strongly advised to utilize this *regist.tif file as the input. Feature Point Registration Registration with feature points involves aligning images without the need for a feature expression matrix. It uses tracklines detected from the image and lines from the chip mask according to predefined rules. Prerequisite to accessing this approach: Image must pass QC: this ensures the tracklines are visible. Valid Stereo-seq chips that follow the predefined rules: Stereo-seq N FFPE V1.0, Stereo-seq T FF V1.3, or Stereo-CITE T V1.1 chips. To ensure that the two sets of lines match, you must also identify a specific point to indicate the orientation of the image; otherwise, the auto-alignment may fail. Requirements to select the correct feature point and get the correct registration result: The tissue's orientation in the image matches its placement on the slide, with the slide's engraved label on the right. The maximum tilting angle allowed is less than 15°. The four chip edges/corners can be seen from the image. The imaging process has strictly followed the instructions specified in Microscope Assessment Guideline - Chapter 3 Microscope Imaging Guidelines - 3.2.2. Precautions for Experimental Operations. You can access it from STOmics -> Resources Documents. If your image cannot fulfill all the requirements, we highly recommend you perform the Morphology Registration. Feature point registration begins with an image that has been adjusted for rotation and scaling. The process of feature point registration involves two stages: Adjusting Image Visibility: To ensure all four edges and corners of the chip are clearly visible. Selecting a Reference Point: To set it as the reference. To ensure all four sides of the chip are visible, you can manually adjust the image's Normalization , Contrast , Brightness , and Opacity . Once you can see the chip, you should identify a predetermined point within the chip region that is nearest to the bottom-left corner. Click on this point to select it, and then click Next to complete the registration. Once the reference point is selected, the system will automatically adjust the image's orientation. The aligned result will be displayed in Step 3: Tissue Segmentation. Once the image is aligned with the matrix, Steps 3 and 4 can be skipped. You can export the semi-processed .tar.gz file and use it as input for SAW to perform automatic segmentation. Additionally, a _regist.tif file will be generated. This reoriented image is adjusted to match the shape and orientation of its corresponding feature expression matrix, serving as the starting point for tissue and cell segmentation. If you plan to use other segmentation tools or algorithms, it is strongly recommended to use the _regist.tif file as input, as other .tif files may fail to import due to discrepancies in image and matrix dimensions. Step 3: Tissue Segmentation Tissue Segmentation is a skippable step. In this step, you will define the tissue regions. Precisely identifying tissue boundaries helps minimize background interference, improving the accuracy of clustering results. The segmented tissue regions from the image will be mapped onto the sequencing-based spatial feature expression matrix, generating a feature density map for the tissue. If you upload the .stereo file in step 1, you can see a semi-transparent mask overlapped on the registered microscope image. For .tar.gz or .tif/.tiff image file, you will need to use tools to draw the tissue region. In the Tissue Segmentation step, you have the option to edit the mask that was previously recorded or create a new one. The tissue mask that was recorded in the .tar.gz or .stereo the file will be labeled as \"RECORD\" in the Segmentation mask dropdown menu, while the mask created by drawing or importing will be labeled as \"CUSTOM\". To change the active mask displayed in the canvas, simply select from the Segmentation mask dropdown. To select or edit the tissue region, use a combination of Lasso , Brush , and Eraser tools. Lasso Tool: This tool is typically used for selecting or deselecting large areas. It allows you to draw a freehand selection around the region of interest. Brush Tool: This tool is more suitable for smaller areas, such as regions around tissue or fill in small holes in the tissue. It allows you to paint over specific areas to include or exclude them from the selection. Eraser Tool: Similar to the Brush tool, the Eraser tool is used for smaller areas. It allows you to remove or deselect specific regions within the larger selection. Lasso Brush Eraser If you have created a .tif format binary mask file using a third-party tool, you can import it by: Click on the Segmentation Mask dropdown menu on the right panel. Select Add Mask in the CUSTOM category to import mask. Navigate to your .tif binary mask file from your file system and click Open to import it. If the imported result is unsatisfactory, you can replace it with a new mask Click on the Segmentation Mask dropdown menu again. Select the option with in the CUSTOM category to replace mask. Navigate to your .tif binary mask file from your file system and click Open to import it. Import tissue mask Show the file name of the imported mask Replace the mask Step 4: Cell Segmentation Cell Segmentation is a skippable step. Cell segmentation is a key step in generating single-cell spatially resolved feature expression data. For H&E images, segmentation can be applied to either nucleus regions or cell regions, depending on the analysis requirements. If you upload the .stereo file in step 1, you can see the red outlines of the cells/nuclei on the registered microscope image. For .tar.gz or .tif/.tiff image file, you will need to use tools to label cells. Cell segmentation is applicable only within the tissue region. Therefore, the areas not encompassed in the Step 3 Tissue Segmentation will appear as a white background. Similar to Step3 Tissue Segmentation, you can edit a previously recorded mask (\"RECORD\") or create a new one (\"CUSTOM\") by selecting from the Segmentation Mask dropdown. Change the active mask by selecting from the Segmentation mask dropdown. StereoMap offers three ways to refine your cell segmentation: Import a Cell Segmentation Mask\\ Use third-party tools or algorithms to segment cells on your registered image and import the result for Stereo-seq analysis. This method is best if you have high-quality segmentation results from third-party tools and want to seamlessly integrate them into your Stereo-seq analysis. It is ideal for large datasets or when using advanced segmentation models. Parameter-Adjustable Semi-Automatic Tool\\ This method allows you to apply automated segmentation across the entire tissue or within a selected region, with adjustable parameters for optimization. It is recommended when you need a quick and efficient way to refine segmentation while maintaining flexibility. This approach works well when the initial segmentation is decent but requires parameter tuning to improve accuracy, especially in cases with variable cell density. Manual Refinement with Drawing Tools\\ Using drawing tools like the lasso, brush, and eraser for precise manual cell segmentation adjustments. This method is most suitable for precise corrections in small regions, such as separating clustered cells, correcting segmentation errors, or handling complex regions where automated methods struggle. It is ideal for small datasets or cases requiring detailed, cell-by-cell refinement. Import a Cell Segmentation Mask If you have already segmented cells using external tools, you can easily import the .tif format segmentation mask generated from the registered image and use it directly in your Stereo-seq analysis. Click on the Segmentation Mask dropdown menu again. Select the option with in the CUSTOM category to replace mask. Navigate to your .tif binary mask file from your file system and click Open to import it. If the imported result is unsatisfactory, you can replace it with a new mask Click on the Segmentation Mask dropdown menu on the right panel. Select Add Mask in the CUSTOM category to import mask. Navigate to your .tif binary mask file from your file system and click Open to import it. Import cell mask Show the file name of the imported mask Replace the mask Parameter-Adjustable Semi-Automatic Tool The parameter-adjustable semi-automatic tool provides a balance between automation and control, allowing you to refine segmentation by adjusting key parameters to better fit your tissue sample. Click on the Automated Segmentation dropdown menu on the right panel, and choose Watershed. Once selected, the Box select mouse tool will be activated and ready for use. Use the Box select mouse tool to select your region of interest (ROI) area where you want to fine-tune the segmentation. This will trigger the Watershed Parameters settings dialog to pop up. In the pop-up Watershed Parameters settings dialog, modify key parameters to optimize segmentation for your ROI. Refer to Understanding Segmentation Parameters and Tips to Optimizing Segmentation Results for more information. After adjusting the parameters, click Apply to implement the changes. Wait for the segmentation outcome to process and review the results. If you are satisfied with the segmentation of most cells, you can further refine any misclassified cells using the drawing tools (lasso, brush, or eraser). Alternatively, if you're satisfied with the segmentation, click Next to proceed to the final step. Be aware that the automated tool only updates the segmentation within your selected region, so cells at the edges of the selection box will have rigid boundaries. To avoid this issue, you can either select the entire tissue region to ensure smooth segmentation across the tissue, or use the drawing tools to fix any misclassified cells while maintaining the accuracy of the rest of the segmentation. Manual Refinement with Drawing Tools For the highest level of precision, manually edit the segmentation using Lasso , Brush , and Eraser tools to fine-tune individual cell boundaries. Lasso: Best for deselecting large areas, such as the background. Brush & Eraser: Ideal for refining smaller areas, such as marking cells, or separating cell clusters. Lasso to select a cell Lasso to deselect some cells Brush Eraser Step 5: Export The final step is to export the results of image registration, tissue segmentation, and cell segmentation. Click Export image processing record to generate a .tar.gz file. Click on the export will open your file system, and you will be allowed to select a saving path. There are two types of export files: *.tar.gz File: This file stores your original image along with all manual adjustments you made. It’s essential for SAW to combine sequencing data with image analysis. The internal structure of the .tar.gz is fixed, therefore to keep everything working smoothly, modifying it is not recommended. *regist.tif File: If you manually adjusted the image alignment, this file will be saved in your output folder (or in the /outs/ directory of SAW). The TIFF format makes it easy to use in third-party tools. This image has been cropped and resized to match the feature expression matrix dimensions, ensuring that any data generated from it using external tools can also be re-imported into StereoMap for further analysis. Pass the TAR.GZ to SAW Pipeline There are two options for transferring the output of Image Processing to SAW. Using --image-tar in the SAW count Pipeline This option is to use the --image-tar argument to feed the .tar.gz file into the SAW count pipeline This will process the .tar.gz file along with the Stereo-seq FASTQ files. The final output includes an HTML summary report with integrated sequencing and imaging data. cd /saw/runs saw count \\ --id= \\ --sn= \\ --omics= \\ --kit-version= \\ --sequencing-type= \\ --chip-mask=/path/to/chip/mask \\ --organism= \\ --tissue= \\ --fastqs=/path/to/fastq/folders \\ --reference=/path/to/reference/folder \\ --image-tar=/path/to/image/tar Using --realigned-image-tar in the SAW realign Pipeline This option is to use the --realigned-image-tar argument to input the .tar.gz file into the SAW realign pipeline SAW realign skips CID mapping and genome alignment. It re-generates aligned images and extracts the feature expression matrix at both tissue and cell level The pipeline produces an updated HTML report with refined segmentation and spatial expression data. cd /saw/runs saw realign \\ --id= \\ --sn= \\ --count-data=/path/to/previous/SAW/count/task/folder/id \\ --realigned-image-tar=/path/to/realigned/image/tar © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:33 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/navigation-for-image-processing/parameter-adjustable-semi-automatic-tool.html":{"url":"tutorials/navigation-for-image-processing/parameter-adjustable-semi-automatic-tool.html","title":"Parameter-Adjustable Semi-Automatic Tool","keywords":"","body":"Parameter-Adjustable Semi-Automatic ToolWhat is a Parameter-Adjustable Semi-Automatic ToolUnderstanding Segmentation ParametersNucleus parametersIntensity parametersTips to Optimizing Segmentation ResultsRecommended order for fine-tuning parametersDifferent staining typesDense vs. sparse cell regionsTroubleshooting & Frequently Asked QuestionsQ: Why do threshold defaults change depending on the image type?Parameter-Adjustable Semi-Automatic Tool What is a Parameter-Adjustable Semi-Automatic Tool A Parameter-Adjustable Semi-Automatic Tool is an image segmentation tool that combines user-defined parameter adjustments with algorithm-driven automation. It allows users to flexibly control the segmentation process by fine-tuning key parameters (e.g. thresholds, cell size, and intensity range) while leveraging algorithms for efficient batch processing. This type of tool sits between fully manual annotation (high precision but time-consuming) and fully automated methods (such as deep learning, which requires large datasets and may lack adaptability). It is particularly suitable for the following scenarios: Medium-scale data processing — More efficient than manual annotation while avoiding errors from insufficient training data in fully automated tools. Diverse experimental conditions – Flexible parameter tuning accommodates different staining types (DAPI, H&E, multi-channel fluorescence) and varying cell densities (sparse vs. dense regions). Reproducibility – Once parameters are set, parameters can be reused for consistent and repeatable segmentation results. This approach offers an ideal balance of speed, flexibility, and precision, making it a powerful tool for biological image analysis in research and clinical applications. Understanding Segmentation Parameters Nucleus parameters ParameterFunctionExampleBackground radiusFloat (>=0, default 8.00). Radius for background estimation, should be > the largest nuclues radius. Set to 0 to disable background correction. Tip: Set a higher value for dense cell images.Use opening by reconstructionBoolean (default on). Use opening-by-reconstructon for background estimation. Opening by reconstruction tends to give a \"better' background estimate. because it icorporates more information across the image tile used for cell detection. However in some cases (e.g. image with prominent folds, background staining, or other artifacts) this can cause problems, with the background estimate varying substantially between tiles.Tip: Turn off if background correction causes unexpected issues.Median filter radiusFloat (>=0, default 0.00). Radius of median filter used to reduce image texture.Tip: Increase this value for smoother segmentation in noisy images.Sigma (Gaussian Smoothing)Float (>=0, default 1.50). Sigma value for Gaussian filter used to reduce noise; increasing the value stops nuclei being fragmented, reduce the accuracy of boundaries.Tip: Use a smaller value if you need to detect small cells.Minimum areaFloat (>=0). Detected nuclei with an area Tip: Set a lower value for small-cell images to avoid losing valid nuclei.Maximum areaFloat (>=0). Detected nuclei with an area > maximum area will be discarded. Tip: Increase for images with large cells. Intensity parameters ParameterFunctionExampleThresholdFloat (≥ 0). Intensity threshold. The detected nuclei must have a mean intensity >threshold.Default values:8-bit grayscale image: 25.0016-bit grayscale image: 100.00Color image: 0.1Tip: Adjust this value based on image type and background complexity.Smooth boundariesBoolean (default on). Smooth the detected nucleus/cell boundaries. Tip: If disabled, edges may appear jagged. Enable this for more clear segmentation masks. Tips to Optimizing Segmentation Results Recommended order for fine-tuning parameters Start with smaller sections to fine-tune your parameters, as this speeds up computation and allows quicker visualization of results. Be aware that the automated tool only updates the segmentation within your selected region, so cells at the edges of the selection box will have rigid boundaries. To avoid this issue, you can either select the entire tissue region to ensure smooth segmentation across the tissue, or use the drawing tools to fix any misclassified cells while maintaining the accuracy of the rest of the segmentation. Minimum & Maximum Area Adjust the cell size range to exclude artifacts or misdetections. Median Filter Radius Increase to remove texture noise or small artifacts, but too high a value may lead to loss of cellular structures. Sigma (Gaussian Smoothing) Increase to reduce noise and smooth boundaries. Decrease to sharpen cell edges and retain fine details, such as the boundaries between cells. Background Radius Controls background estimation, affecting overall signal balance. Identifies cells and background in the image, and provides a comprehensive evaluation of features in adjacent regions. Sparse cell regions: Use a larger radius for smoother background correction. Dense cell regions: Use a smaller radius to retain more details. Threshold Distinguish cell nuclei from the background. For color images with complicated backgrounds (e.g., H&E staining), it is recommended to set a smaller threshold. Different staining types Generally, Watershed segmentation algorithm performs better on grayscale images (e.g., ssDNA, DAPI, IF) compared to color images (e.g., H&E). This is because the algorithm treats the image as a topographic surface, where high intensity denotes peaks and low intensity denotes valleys. In grayscale images, this relationship is straightforward, making segmentation more effective. (docs.opencv.org) In contrast, color images have multiple channels (e.g., red, green, blue), which may make segmentation more complicated. To simplify the process, color images are often converted to grayscale, and the grayscale values are normalized to the range [0, 1] before applying the Watershed algorithm. For grayscale images Threshold: Set a higher intensity threshold to separate cell nuclei from the background effectively. Minimum/Maximum Area: Adjust based on the expected cell size to filter out noise and artifacts. For color images Sigma: Increase to reduce noise and smooth image boundaries. Threshold: Set a lower intensity threshold (≤ 1) to achieve better segmentation results. Dense vs. sparse cell regions For dense cell regions: Background Radius: Use a smaller background radius to preserve fine details. Maximum Area: Lower the value to prevent cell merging. For sparse cell regions: Background Radius: Use a larger background radius to effectively subtrack large-scale background variantions. Minimum Area: Increase cell size to reduce background noise misidentification. Troubleshooting & Frequently Asked Questions Q: Why do threshold defaults change depending on the image type? A: Each image type has a different intensity scale. For example: 8-bit grayscale images range from 0 to 255, so the default is 25.00. 16-bit grayscale images range up to 65,535, so the default is 100.00. Color images often use a 0–1 scale, so the default is 0.1. These defaults are chosen to help distinguish foreground (like cells) from background under typical conditions. Of course, you can adjust them based on your specific image. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:33 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/navigation-for-tools/":{"url":"tutorials/navigation-for-tools/","title":"Navigation for Tools","keywords":"","body":"Navigation for ToolsNavigation for Tools Find small tools that assist your Stereo-seq analysis. Tool NameDescriptionImage QCLearn about acceptable image format, QC criteria, the Image QC interface, and staining-specific considerations. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/navigation-for-tools/stereo-seq-image-qc.html":{"url":"tutorials/navigation-for-tools/stereo-seq-image-qc.html","title":"Image QC","keywords":"","body":"Image QCAccessing Image QCInput Image RecommendationImage Data TypesImage Data TypesImage File FormatQC CriteriaTrackline DetectionImage Calibration (conditional)Using Image QCStarting Image QCRun QCLocating QC Output FileNext Steps After QCQC Tips Specific for Image TypesNuclei-staining Image: ssDNA or DAPINuclei-staining & Immunofluorescence Image: DAPI + mIFHematoxylin & Eosin Staining Image: H&EUploading SettingsBuilt-in Upload PathsCustom Upload PathsImage QC Image QC serves to evaluate the appropriateness of microscope images obtained from the Stereo-seq experiment for precise automated analysis within the Stereo-seq Analysis Workflow (SAW). Accessing Image QC StereoMap's Image QC can be accessed from the Tools page. Input Image Recommendation The acceptable types of images include nuclei-staining images (e.g., ssDNA or DAPI), a image set that has one nuclei-staining image (e.g. DAPI) and up to 6 immunofluorescence images (IF images), as well as color images (specifically H&E images). The recommended file format for images is TIFF. Additionally, some microscope file formats such as CZI files from ZEISS or image tiles organized in a folder from Motic are also acceptable. If you are unsure whether your imaging system is suitable for the Stereo-seq experiment, please refer to the Microscope Assessment Guideline to assess your imaging system. The guideline can be accessed from STOmics > Resources Documents. Image Data Types This section provides details on the types of images that can be used in Image QC, their recommended file formats, and compatibility with different microscope systems. Image Data Types StereoMap Image QC supports the following image types: Nuclei-staining images (e.g., ssDNA or DAPI) Image sets containing one nuclei-staining image (e.g. DAPI) and up to 6 immunofluorescence (IF) images Color images, specifically H&E-stained images. Image TypeData TypesFile FormatNuclei-staining8 or 16-bit grayscale image stores in a single single-page image file.Highly recommended format.TIFF file (.tif or .tiff)CZI file (.czi)Image tilesNuclei-staining + IF8 or 16-bit grayscale images store in multiple single-page image files.TIFF file (.tif or .tiff)Nuclei-staining + IF8 or 16-bit grayscale images store in a multi-page image file.Only valid for the Zeiss microscope image.CZI file (.czi)H&E24 or 48-bit colored image stored in a single image file.TIFF file (.tif or .tiff)CZI file (.czi)Image tiles Visit Using Image QC for each image type to get more examples. Image File Format StereoMap supports various file formats for image QC, including standard TIFF files and microscope-specific formats such as CZI (Zeiss) and tiled image formats (Motic). It is highly recommended to use TIFF files due to their widespread compatibility and optimal performance. File Format Microscope manufacture and scanner version Standard TIFF files ( .tif or .tiff ) Any .tar.gz QC output --The output .tar.gz compressed file from Image QC .tif format image tiles STOmics: Scanner Version 1.2.2Motic: PA53Scanner 1.0.0.14Leica: LAS X 3.7.4.23463 Other format ZEISS (.czi format): ZEN Version 3.1.0.0000ZEN Version 3.5.093.00009 Additionally, if you are uncertain whether your microscope system is compatible with Stereo-seq experiment, please refer to the Microscope Assessment Guideline available at STOmics > Resources Documents. QC Criteria The quality of an image reflects both microscope stability and imaging performance. In Image QC, the assessment includes detecting qualified tracklines and evaluating stitching stability. Depending on the scenario, calibration confidence may also be evaluated. The specific criteria and score thresholds vary slightly based on the image type. The assessments include: Trackline Detection Tracklines are fiducial markers etched on the Stereo-seq chip surface. They are visible in microscope images and the spatial feature expression density heatmap, serving as key references to align both data modalities. A detection score is assigned based on the visibility of tracklines and the number of neighboring tracklines that help define a periodic trackline grid (or template). The inferred trackline grid is essential for accurately adjusting the scale, rotation, and position of the image during registration. Image Calibration (conditional) For experiments involving multiple images of the same chip, consistent stitching, registration, and tissue region alignment are crucial. However, due to staining and imaging limitations, tracklines are only visible in nuclei-staining images (e.g., ssDNA, DAPI). To ensure accurate alignment, other images—such as immunofluorescence (mIF) images—must first be aligned with the nuclei-staining image before registration with the spatial feature expression density map. In nuclei-staining + mIF scenarios, Image QC computes similarity and feature offsets to assess alignment confidence. This calibration is applied only for single-channel images. AssessmentScoreExampleTrackline Detection≥ 60, sufficient number of qualified tracklines are detected. The image can be automatically registered with the sequencing-based spatial feature expression matrix., insufficient number of unqualified tracklines. The detected tracklines cannot form a valid trackline template or do not align with the expected template. Consider retaking the image to improve trackline visibility.Necessary criterion to pass QC.Image CalibrationPass, the maximum feature offset between nuclei-staining image and another image ≤ 20 pixels and the feature morphology similarity ≥ 1%.Fail, the maximum feature offset between nuclei-staining image and another image > 20 pixels or the feature morphology similarity Conditional assessment indicator, only applicable in DAPI+mIF scenarios. Image Calibration pass/fail does not affect the overall QC result. For further details on image quality assessment, refer to STOmics Microscope Assessment Guideline - Chapter 4 Microscope Image Assessment - 4.3. Image Examples. Using Image QC Image QC interface components are shown here: Starting Image QC Open the image QC tool and drag the image to the window. Please refer to QC Tips Specific for Image Types section for more practical tips for proper image naming and organization to avoid processing errors. The Image Information section will be automatically filled. Make sure at least the required fields are accurately filled: Image informationDescription and exampleChip SNRequired. Stereo-seq chip serial number, found on the bottom of the Stereo-seq chip.E.g. S1 (1x1) chip: SS200000135TL_D1, C02533CS0.5 (0.5x0.5) chip: FP200009107_E414, B03210C211Large chip: SS200000108BR_A3A4, D02070C3D3Please ensure the SN matches the correct image.OperatorRequired. User information. It is recommended to enter your email address.Image PathRequired. Path of the image to be checked. This is auto-filled when an image is dragged and dropped into the window.Avoid using non-English characters, symbols, or spaces to prevent errors.Staining TypesRequired. The type of image staining. Valid options are ssDNA, DAPI, DAPI+mIF, H&E.UploadRequired. Option to upload the image to STOmcis Cloud or a custom path. Valid options:No: do not upload (default).QC Input Files (Microscope image): uploads the microscope image in its original format.QC Output Files (TAR.GZ): uploads the image processed by image QC.Select all: upload both input and output files.See Uploading Settings for details.RemarkOptional. Any comments to the image or this QC process. Run QC Once all required fields are set, the Run button will be enabled, allowing you to start the QC assessment. A comprehensive QC process involves the following steps: QC Index Evaluation - Analyzing tracklines, stitching stability, and calibration confidence. Image Compression - Preparing the QC result image file for further processing. (Optional) Uploading QC files - If enabled, the image will be uploaded as part of the QC progression. During the process, the progression status, results, and overall QC conclusion will be displayed on-screen. Further analysis suggestions will be provided based on the QC assessment. Multiple images If you have multiple images, you can add separate tabs for each image. Then, fill in the necessary information for each image and start the QC task. The QC tasks will be executed sequentially in the background. Locating QC Output File Once the QC progression is completed, the output directory will be displayed on the screen. You can find your QC result file in your file system at StereoMapWorkspace -> QC folder, or you can click on the putput path to open the folder directly. You can also change the default saving path in Setting. Next Steps After QC If the image successfully passes QC. The QC output .tar.gz can be transferred to the SAW count pipeline using the --image-tar argument. This enables automatic co-processing with the feature expression matrix. If the image does not pass QC. You can still co-visualize the image with the feature density map. To do this, input the image file into the StereoMap Image Processing module. You may need to manually adjust or rectify issue steps before transferring the image to SAW. QC Tips Specific for Image Types Different image types require tailored quality control (QC) considerations to ensure accurate analysis. Below are specific tips for handling ssDNA/DAPI, DAPI+mIF, and H&E images in Image QC. Nuclei-staining Image: ssDNA or DAPI The nuclei-staining image undergoes quality assessment primarily based on: Trackline Detection (Necessary QC indicator) Below is a demo of the expected processing time and input format. Typical QC time: ~1 min\\ &#xNAN;(for a 10X objective, 8-bit .tif file, ~20,000 px x 20,000 px on a 1 cm x 1 cm Stereo-seq Chip) Factors affecting QC time: Larger image size Higher bit depth (16-bit instead of 8-bit) .tar.gz QC output (due to additional parsing time) Input example: File FormatExample.tif or .tiff file.tar.gz QC output.tif format image tilesMotic:STOmics Microscope Go Optical:Leica:Other formatZeiss .czi Nuclei-staining & Immunofluorescence Image: DAPI + mIF The QC assessment for nuclei-staining (DAPI) and multiple IF images relies on three key indicators: Trackline Detection (Necessary QC indicator) Image Calibration (Assessed but does not affect overall QC conclusion) Below is a demo of the expected processing time and input format. Typical QC time: ~3 min\\ &#xNAN;(for nuclei-staining + 2 IF images, 10X objective, 8-bit .tif file, ~20,000 px x 20,000 px on a 1 cm x 1 cm Stereo-seq Chip) Factors affecting QC time: Higher bit depth (16-bit instead of 8-bit) .tar.gz QC output (due to additional parsing time) Input example: To ensure correct software recognition, rename images or folders with the following format (\"<>\" embraces the information that needs to be replaced): DAPI: IF: __IF File FormatExample.tif or .tiff file.tar.gz QC output.tif format image tilesMotic:STOmics Microscope Go Optical: Hematoxylin & Eosin Staining Image: H&E The QC assessment for an H&E image relies on: Trackline Detection (Necessary QC indicator) Detecting tracklines in an H&E image is more challenging than in grayscale images, so it is important to ensure maximum visibility of tracklines under the microscope for better results. Below is a demo of the expected processing time and input format. Typical QC time: ~4 min\\ &#xNAN;(for 10X objective, 48-bit .tif file, ~20,000 px x 20,000 px on a 1 cm x 1 cm Stereo-seq Chip) Factors affecting QC time: Color image (since they are color images, making them three times larger than grayscale images) .tar.gz QC output (due to additional parsing time) Input example: File FormatExample.tif or .tiff file.tar.gz QC output.tif format image tilesMotic:STOmics Microscope Go Optical:Other format Uploading Settings Uploading settings configure the transfer of image files to HPC (High-Performance Computing) clusters or cloud storage for further processing. If you are unsure which mode to use, please don’t hesitate to consult your FAS. Built-in Upload Paths Upload path typeDescriptionRegionALICLOUDTransfers images via Alibaba Cloud. Recommended for users in regions where STOmics Cloud is hosted on Alibaba Cloud. If new regions are available, contact FAS for setup.SINGAPORE, APAWSTransfers images using Amazon Web Service (AWS). Best for users where STOmics Cloud is deployed on AWS. Contact FAS for new region setup if needed.CALIFORNIA, USRIGA, EUSINGAPORE, APHPCDesigned for laboratory internal networks, enabling direct uploads to local clusters. Contact FAS to configure in advance. Primarily used within STOmics Tech’s internal network.CHONGQING, CNSHENZHEN, CNQINGDAO,CNHAINAN,CNRAYSYNCTransfer images using Raysync over the internet, allowing seamless uploads to regional clusters without any additional setup.CHONGQING, CNQINGDAO, CNSHENZHEN, CNHAINAN,CN Custom Upload Paths If you have your own Alibaba Cloud or AWS cloud service, you can transfer images directly to your personal cloud storage bucket by setting a customized upload path. Steps to Configure Custom Upload Paths Select cloud service type Choose between ALICLOUD.CUSTOM or AWS.CUSTOM. Set the region to OWNER. Enter required details Remote path KeyID & password S3 bucket name If using Alibaba Cloud, also provide domain information. Confirm & save Click Confirm to finalize the settings. Your customized configuration will appear in the Upload Information Configuration window. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:33 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/bioinformatics-analysis/":{"url":"tutorials/bioinformatics-analysis/","title":"Bioinformatics Analysis","keywords":"","body":"Bioinformatics AnalysisBioinformatics Analysis Learn about application features in the assay analysis. Solution NameAnalysesStereo-seq T FFCheck Image AlignmentCo-expression of Selected GenesCharacterize Substructure and Generate New HeatmapMID FilteringDifferential Expression AnalysisStereo-seq N FFPERegion Annotation Based on H&E ImageMicroorganism and Host GenesStereo-CITE T FFExplore Tissue Context through Spatial Multi-omics DataSpatial Distribution of Protein and its Corresponding Marker Gene © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/bioinformatics-analysis/stereo-seq-t-ff.html":{"url":"tutorials/bioinformatics-analysis/stereo-seq-t-ff.html","title":"Stereo-seq T FF","keywords":"","body":"Stereo-seq T FFCheck Image AlignmentCo-expression of Selected GenesCharacterize Substructure and Generate New HeatmapMID FilteringDifferential Expression AnalysisStereo-seq T FF Check Image Alignment The tracklines on the chip surface act as markers to help with image registration. They are created when the capturing probe is unloaded and will show up as narrow lines on the spatial feature expression density heatmap. A good alignment is achieved when the tracklines perfectly overlap with the lines visible on the image. Highly recommend zooming in on the tissue edges to check the quality of the alignment. A small tip for examining alignment, begin by inspecting the two diagonal fields of view. If these views perfectly overlap, it’s likely that the overall alignment is suitable. However, if most of the track lines do not overlap, you will need to realign the image manually. Refer to the Navigation for Image Processing for instructions on how to do this. If the tracklines overlap perfectly in one field of view but are mismatched in the diagonal view, it could indicate an issue due to stitching problems in your microscope image. Co-expression of Selected Genes To compare the expression distribution of features, you can visualize them in different colors. Start by selecting the interested genes, the Canvas shows a summarized expression heatmap. Next, click the Layer menu to expand the panel and open the Gene Heatmap layer setting window. Select the Multi-colored option under the Display Schemes, you can now compare and contrast the location of the selected genes. Note that the two selected genes are not co-expressed in the tissue. If the color assigned to the gene or display setting is not optimal, click the color dot next to the selected gene to open the feature display setting window. You can change the color profile or adjust any settings. Unlike the previous selection, here we select genes that exhibit co-expression in blended colors of yellow and violet. Characterize Substructure and Generate New Heatmap To identify substructure within tissue samples, the Lasso selection function can be a useful tool. You can manually delineate the regions of interest within the tissue samples. These selected regions can be scattered or continuous. The regions labeled with the same name are grouped together. If you have exited lasso mode after saving the label, but realize that you need to cover another region, you can simply use the same label name to lasso select the remaining region. Once the regions have been well-labeled, the coordinate information can be saved and passed to SAW reanalyze lasso to obtain the spatial feature expression matrix for the chosen region. Click to the right of group or label name and choose GeoJSON to lasso targeted area to export the lasso GeoJSON file. Your file system will open, allowing you to choose the location to save your output YYYYMMDDHHMMSS.lasso.geojson file. Pass the lasso GeoJSON file path to SAW reanalyze lasso pipeline through the --lasso-geojson argument to generate the matrix of the lasso area. It is important to make the GeoJSON available to both SAW and the computing environment where the pipeline is run. The lasso GeoJSON stores the coordinates of the region contour, rather than the spots, allowing it to be used as input for square bin or cell bin computation. For generating new matrics in fixed-sized square bins, input .gef through the --gef argument and specify bin sizes with --bin-size. saw reanalyze lasso \\ --gef=/path/to/input/GEF \\ --lasso-geojson=/path/to/lasso/YYYYMMDDHHMMSS.lasso.geojson \\ --bin-size=1,20,50,100,200 \\ --output=/path/to/output/folder For exporting new matrics in cell bins, input .cellbin.gef through the --cellbin-gef argument. saw reanalyze lasso \\ --cellbin-gef=/path/to/input/cellbin/GEF \\ --lasso-geojson=/path/to/lasso/YYYYMMDDHHMMSS.lasso.geojson \\ --output=/path/to/output/folder The newly generated matrices can be used for further analysis. MID Filtering Preprocessing spatially resolved transcriptomic expression data is essential to eliminate noise before downstream analyses. The MID filtering function is specifically designed to manually remove under- or over-expressed spots of each selected feature, allowing for a focus on its spatial pattern. The filtering function is applied to each selected feature individually, allowing for separate adjustments and different filtering thresholds. The filtering thresholds represent the lower and upper limits of the MID count and vary with bin sizes. Therefore, it is highly recommended to first switch to the intended bin size that you plan to use in the subsequent analyses before making adjustments to the MID filtering. The output matrix concatenates the filtered matrix of each feature and can be used in downstream analyses. Given the limitations of compute resources, it’s highly recommended to output MID filter records as a JSON file instead of a GEF file if your dataset is generated from a Stereo-seq Large Chip Design. The JSON need to be pass to SAW reanalyze midFilter pipeline through the --mid-json argument to generate the matrix. saw reanalyze midFilter \\ --gef=/path/to/input/GEF \\ --mid-json=/path/to/MID/filtering/JSON \\ --output=/path/to/output/mid_filtering Differential Expression Analysis New feature! Compatible with SAW >= V8.0. Differential expression analysis is conducted on spot groups, such as clusters, or spatial regions, such as lasso labels. For clusters, click -> GeoJSON for differential expression and Confirm to export the necessary information passed to SAW reanalyze diffExp for performing computation. For lasso labels, you need first to create at least two labeled regions in a group. Then, click located to the right of the group name and select GeoJSON for differential expression. In the pop-up window, select the analysis method, and click Confirm to export the necessary information passed to SAW reanalyze diffExp for performing computation. Your file system will open, allowing you to choose the location to save your output YYYYMMDDHHMMSS.diffexp.geojson file. Two differential expression methods are available: Label vs. others: To identify features that are differentially expressed between a specific label (cluster) and all other clusters combined. Label vs. label: To identify features that distinguish a specific label (cluster) from each other label within the same group. Pass the GeoJson file path to SAW reanalyze diffExp pipeline through the --diffexp-geojson argument to generate the analysis result. It is important to make the GeoJSON available to both SAW and the computing environment where the pipeline is run. ```sh saw reanalyze diffExp \\ --count-data=/path/to/previous/SAW/count/result/folder/id \\ --diffexp-geojson=/path/to/StereoMap/diffexp/YYYYMMDDHHMMSS.diffexp.geojson \\ --output=/path/to/output/folder ``` SAW outputs include a _marker_features.csv file which is a formatted CSV file containing differential expression analysis result for visualization in StereoMap. Download the file to your local computer to open it in StereoMap by Load CSV file (see Feature Menu -> Load and Save). The differential expression analysis result table will be open in a linked new window. You can reorder the table by clicking the “up” and “down” arrows of log2 fold change (L2FC) or p-values of each gene and cluster to see the significant features. Clicking on a feature name in the table will reveal the corresponding gene expression distribution on the canvas in summarized heatmap. Additionally, for multiple features, you can explore their co-expressed relationship by showing them in multi-color mode. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/bioinformatics-analysis/stereo-seq-n-ffpe.html":{"url":"tutorials/bioinformatics-analysis/stereo-seq-n-ffpe.html","title":"Stereo-seq N FFPE","keywords":"","body":"Stereo-seq N FFPERegion Annotation Based on H&E ImageMicroorganism and Host GenesStereo-seq N FFPE Region Annotation Based on H&E Image Spatial transcriptomics allows for the visualization and quantification of gene expression data in the context of the original tissue architecture. It generates a gene expression heatmap that characterizes the gene’s activity over the tissue. This can provide insights into the functional organization of tissues at the molecular level. On the other hand, H&E staining provides a detailed view of tissue architecture and histologic information. It allows pathologist to easily differentiate between the nuclear and cytoplasmic parts of a cell. The overall patterns of coloration from the stain show the general layout and distribution of cells. To annotate regions of interest from tissue and extract corresponding gene expression data to gain a comprehensive understanding of both the structural and functional aspects of tissue, you may prefer to start by label on H&E image based on pathohistological features. First, adjust the opacity of the feature expression heatmap to ensure the H&E image is visible. Following that, use the lasso function to annotate on the H&E image (similar to Characterize Substructure and Generate New Heatmap). Press Enter to complete the selection and click Save to naming the annotation. If you need a group contains multiple annotated regions, remember to label them under the identical group name. You are now able to leave the lasso mode and modify the heatmap’s opacity to view the annotations on different layers. After annotation, if you would like to obtain the spatial feature expression matrix of the selected regions, click to the right of the group or label name and choose GeoJSON to lasso targeted area (export YYYYMMDDHHMMSS.lasso.geojson). Or, if you would like to understand the differences between annotated regions, choose GeoJSON for differential expression (export YYYYMMDDHHMMSS.diffexp.geojson). See Characterize Substructure and Generate New Heatmap for details on how to pass the GeoJSON file to SAW, and see Differential Expression Analysis for details on the explanation of differential expression methods and how to pass the GeoJSON file to SAW. Microorganism and Host Genes Stereo-seq N FFPE product capture total RNA information by free probe design. This design also allows for efficient capturing of microorganisms. SAW count pipeline for Stereo-seq N FFPE kit with argument --micro-detect outputs the host's spatial gene expression matrix and microorganism distribution matrix. Open .stereo In StereoMap Visual Explore, microorganism distribution matrix can be accessed in layer menu under Microorganism category. Click in front of the layer name to open it in a new linked window. The main window and the linked window are connected based on spot coordinates. In the main window, you can choose clusters or use lasso selection to highlight specific regions. These selected spots will then be highlighted in the linked window, along with their corresponding content. In the example below, the main window depicts spatial clusters in bin 200, while the linked window illustrates the distribution of microorganisms in the same bin. When you choose Clusters in the main window, the linked window will exclusively display spots with corresponding coordinates. In the linked window, you can utilize the lasso function once more. Doing so will allow the statistic panel to show the components of the selected spots. Microorganisms are classified into taxonomic levels using a hierarchy followed by a double underline and the microbial species name. These levels are represented by abbreviations: p (phylum), c (class), o (order), f (family), g (genus), and s (species). For instance, the genus Mycobacterium is represented as g_Mycobacterium in the feature and statistics panel. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:33 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"tutorials/bioinformatics-analysis/stereo-cite-t-ff.html":{"url":"tutorials/bioinformatics-analysis/stereo-cite-t-ff.html","title":"Stereo-CITE T FF","keywords":"","body":"Stereo-CITE T FFExplore Tissue Context through Spatial Multi-omics DataBy clustersBy lassoSpatial Distribution of Protein and its Corresponding Marker GeneReferenceStereo-CITE T FF Spatial multi-omics data enables researchers to explore cellular processes across different omics layers. Despite the limitations of RNA expression in predicting protein levels, integrating spatial transcriptomics and proteomics provides valuable complementary insights, revolutionizing our understanding of complex biological activities. Explore Tissue Context through Spatial Multi-omics Data The linked windows can manipulate multiple views of the same dataset simultaneously based on spot coordinates. The spots that require manipulation based on the coordinates rely heavily on the initiator of the action. Therefore, only the primary window can serve as the initiator, and the result will be reflected in all other linked windows. By clusters To view the gene and protein cluster results side by side, open the layer menu. Click on the in front of Cluster under Proteomics to open the protein cluster result in a new linked window. You are also allowed to switch the initiative party in the main window. Clustering based on spatial gene expression or protein level leads to different classifications for spots with the same coordinates. The primary window (left) displays the clusters based on the spatial gene expression matrix. When a cluster is selected, the corresponding spots within the cluster will be highlighted. In the linked window (right), only the selected spots are displayed on the canvas and are color-coded based on the protein clusters. Spot coordinates in cluster 1 of spatial gene clustering result (left) have different classifications in spatial protein clustering (right) The functionality of linking spots between windows also extends to linking UMAP and spatial cluster view. Gene clusters in UMAP (left) and protein clusters in spatial view (right) Spots linking between gene's UMAP (left) and protein's spatial clustering (right) By lasso The lasso function is currently only available in the spatial view, so it cannot be used to link spots in UMAP or any other spatial views. In addition to selecting a cluster, you can also use the lasso function to choose specific regions of interest. After saving the lasso region, you can switch to any spatial view, including gene heatmap, protein heatmap, gene cluster, and protein cluster. Spatial Distribution of Protein and its Corresponding Marker Gene This function is only applicable to square bins such as bin 20, 50, 100, etc. For Stereo-CITE data analysis, SAW (>= 8.1) displays gene vs. protein correlations in the HTML analysis report, refer to SAW User Manual -Analysis-Outputs-HTML Report-Gene : protein correlations for more information. In StereoMap (>= 4.1), you can visualize the spatial distribution of protein-marker gene pairs and gain a better understanding of the correlations. To view the protein heatmap alongside the gene heatmap, open the layer menu. Click on the in front of Protein_Heatmap_tissue to open the protein heatmap in a new linked window. This will allow you to see both heatmaps side by side. You are also allowed to view the protein heatmap first, and open the gene heatmap in a new linked window. In SAW HTML report, protein IgM_Ms and its pre-defined marker gene Ighm show a positive correlation (Pearson's r = 0.4957) which agrees with previous reports [1]. In the StereoMap, you can click on the icon located behind the feature name to observe if the expression of the pair same or different across gene or protein maps. Clicking on the of protein IgM_Ms will display its protein distribution in the protein window and show the gene Ighm distribution in the gene window at the same time. Correlation in SAW HTML report Spatial distributions of Ighm (left: gene) and IgM_Ms (right: protein) If you want to see multiple pairs, you may click on the in front of the feature name to select them. Select multiple feature pairs The large bin size may blur the pattern. You can switch to other square bin sizes in the main window, and the linked window will be manipulated simultaneously. Reference Niu, X., Swett, A. D., Sotelo, J., Jiao, M. S., Stewart, C. M., Potenski, C., Mielinis, P., Roelli, P., Stoeckius, M., & Landau, D. A. (2023). Integration of whole transcriptome spatial profiling with protein markers. Nature Biotechnology, 41(6), 788-793. https://doi.org/10.1038/s41587-022-01536-3 © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"algorithms/":{"url":"algorithms/","title":"Algorithms","keywords":"","body":"AlgorithmsAlgorithms Image Processing AlgorithmsAlgorithms used during the image processing steps. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"algorithms/image-processing-algorithms.html":{"url":"algorithms/image-processing-algorithms.html","title":"Image Processing Algorithms","keywords":"","body":"Image Processing AlgorithmsParameters of Parameter-Adjustable Semi-Automatic ToolBackground Radius parameterUse Opening by Reconstruction parameter Median Filter Radius parameter Sigma (Gaussian Smoothing) parameter Threshold parameterSmooth Boundaries parameterImage Processing Algorithms Parameters of Parameter-Adjustable Semi-Automatic Tool Background Radius parameter For each pixel in the image, the Background Radius parameter determines a square neighborhood around the pixel based on the specified radius. The features of the pixels within this neighborhood (such as grayscale values) are then analyzed to estimate the background characteristics, allowing the algorithm to determine whether each pixel belongs to the background. As shown in the diagram below, assume the center pixel is a \"jagged protrusion\" (grayscale value 200) at the edge of a cell, and the surrounding 8 pixels are background (grayscale value around 100).\\ Each square represents a pixel in the image, with the number inside representing the pixel's grayscale value. Since the features of the neighboring region are similar to those of the background, the algorithm will classify the center pixel as belonging to the background based on the neighborhood features. Use Opening by Reconstruction parameter Opening by reconstruction is a morphology-based filtering technique used in image processing to remove isolated bright noise—pixels with significantly higher intensity than their surroundings—while preserving the true shape and size of objects. This method combines erosion and morphological reconstruction, offering superior noise suppression compared to traditional opening operations (erosion followed by dilation), by better protecting structural details. For example, consider a 3×3 neighborhood containing eight normal pixels with grayscale values around 100 and one noise pixel with value 200: Erosion step: Each pixel is replaced by the minimum value within its 3×3 neighborhood. Since the noise pixel is surrounded by lower-intensity pixels (~100), its value is reduced to 100, achieving preliminary noise suppression. Reconstruction step: Using the eroded image as a “seed,” morphological reconstruction is performed pixel-wise on the original image. The reconstruction dilates connected regions outward, but never beyond the original pixel intensities. The noise pixel, now at 100 and connected to surrounding pixels, can only recover up to the local maximum intensity in the original image (e.g., 107). Normal pixels that were less eroded can fully restore their original values (e.g., 101, 102). This process effectively “dilutes” or suppresses noise while preserving genuine structures, enhancing image smoothness and structural fidelity. Median Filter Radius parameter The Median Filter Radius is a simple yet effective technique for reducing image noise, commonly used in preprocessing steps like cell segmentation. It works by sliding a square window (typically 3×3 or 5×5 pixels) across the image. At each position, the grayscale intensity within the window are sorted, and the center pixel is replaced by the median value. The size of the window is controlled by the filter radius setting: a larger radius means a bigger window, which results in stronger smoothing but may also blur fine details. This method effectively removes isolated bright or dark noise (so-called salt-and-pepper noise) while preserving important structures such as edges and boundaries. For instance, if the median filter radius is set to 3 pixels (corresponding to a 3×3 window), and the window contains eight pixels with grayscale values around 100 and one noisy pixel with a value of 200, the sorted values yield a median of 104. The noisy center pixel is then replaced with this median, effectively reducing noise while preserving edges. Sigma (Gaussian Smoothing) parameter For each pixel in the image, a Gaussian kernel corresponding to the specified Sigma value (e.g., a 3×3 kernel for sigma = 0.5) is utilized to compute a weighted average. This process smooths out minor noise and jagged edges, resulting in a blurred image. The gradient of this blurred image is subsequently calculated, and the watershed algorithm is employed for segmentation. The sigma value determines the \"neighborhood range,\" and the core of this algorithm lies in using the \"voting\" of surrounding pixels to determine the new value of the central pixel. The closer a pixel is to the center, the greater its \"weight,\" and vice versa, achieving local smoothing of the image. As shown in the diagram below, assume the center pixel is a \"jagged protrusion\" (grayscale value of 200) at the edge of a cell, and the surrounding 8 pixels are background (grayscale value of 100). Without sigma blurring, the central pixel's value is much higher than its neighbors, forming a \"peak,\" which the watershed algorithm might interpret as a \"boundary,\" resulting in unnecessary small regions being segmented. With sigma blurring, the grayscale value of the central pixel is smoothed by neighboring pixels—from 200 to 125—eliminating the \"peak\" shape. This helps the watershed algorithm better detect true boundaries and avoid over-segmentation. Threshold parameter The threshold parameter is a fundamental tool for intelligent pixel classification in image processing. By setting a numeric cutoff, the algorithm separates the image into foreground and background based on pixel intensity: Pixels above the threshold typically correspond to dense regions such as cell nuclei, cytoplasm, or other relevant biological structures, and are classified as foreground. Pixels below the threshold usually represent low-intensity background areas and are classified as background. This threshold-based binarization strategy enables flexible adaptation to different sample characteristics by adjusting the cutoff value, facilitating automatic region segmentation and identification. For instance, in a 3×3 pixel neighborhood, if the threshold is set to 25, and three or more pixels have intensity values below 25, those pixels will be marked as background, forming distinct background areas as shown in the schematic below. Smooth Boundaries parameter The Smooth Boundaries parameter works in conjunction with Sigma to balance noise suppression and preservation of true boundaries through a pixel redistribution algorithm. Smooth Boundaries off: Segmentation is based on pixel intensity differences in the original image. Both isolated noise pixels above the threshold and true boundaries may be detected, often resulting in jagged or fragmented edges. This setting is suitable when preserving fine cellular structures is critical. Smooth Boundaries on: The image is first smoothed by Gaussian Smoothing, reducing noise intensity below the threshold. Only continuous and significant grayscale changes, corresponding to true boundaries, remain. This results in smoother segmentation outputs with more accurate and regular boundaries. For example, in a 4×4 neighborhood with a Threshold set to 80: Off: Noise pixels with intensity 100 exceed the threshold, falsely identified as part of the cell region, causing abnormal protrusions on the boundary. On: Noise intensity is blurred down to 60, below the threshold, and correctly excluded. Only the central true region is segmented, producing clean and noise-free boundaries. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"support-pages/support.html":{"url":"support-pages/support.html","title":"Support","keywords":"","body":"SupportSupport Please contact us for any questions or suggestions: Greater China regions: services@stomics.tech Global: info_global@stomics.tech © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"support-pages/datasets.html":{"url":"support-pages/datasets.html","title":"Datasets","keywords":"","body":"DatasetsStereo-seq T Fresh Frozen (FF)Stereo-CITE T Fresh Frozen (FF)Stereo-seq N Formalin Fixed & Paraffin Embedded (FFPE)Datasets Jump to the page of demo datasets for more exploration. Original input files and analysis results can be obtained there. “Kit version” records the input information of the SAW count --kit-version argument. Stereo-seq T Fresh Frozen (FF) DatasetChip sizeKit versionSpeciesDisease stateAnatomical tissueStaining methodSS200000135TL_D1_mouse_brain_Stereo-seq_T_FF1 cm x 1 cmStereo-seq T FF V1.2MouseHealthyBrainssDNAFP200009107_E414_mouse_olfactory_bulb_Stereo-seq_T_FF0.5 cm x 0.5 cmStereo-seq T FF V1.2MouseHealthyOlfactory bulbDAPIB01207E3G4_rat_brain_Stereo-seq_T_FF2 cm x 3 cmStereo-seq T FF V1.2RatHealthyBrainssDNAC02533C1_mouse_kidney_Stereo-seq_T_FF1 cm x 1 cmStereo-seq T FF V1.2MouseHealthyKidneyH&EC04042E2_mouse_brain_Stereo-seq_T_FF1 cm x 1 cmStereo-seq T FF V1.3MouseHealthyBrainssDNAC04042E3_mouse_brain_Stereo-seq_T_FF1 cm x 1 cmStereo-seq T FF V1.3MouseHealthyBrainH&EB04372C214_mouse_tongue_Stereo-seq_T_FF0.5 cm x 0.5 cmStereo-seq T FF V1.3MouseHealthyTongueH&EB04372C214_mouse_eyeball_Stereo-seq_T_FF0.5 cm x 0.5 cmStereo-seq T FF V1.3MouseHealthyEyeballH&EB04372C211_mouse_ovary_Stereo-seq_T_FF0.5 cm x 0.5 cmStereo-seq T FF V1.3MouseHealthyOvaryH&EC03937C4_mouse_brain_Stereo-seq_T_FF1 cm x 1 cmStereo-seq T FF V1.3MouseHealthyBrainDAPI + 2 IF images ( SMI32,NeuN)B04652F6_mouse_testis_Stereo-seq_T_FF1 cm x 1 cmStereo-seq T FF V1.3MouseHealthyTestisDAPI + 1 IF images (TESK2)D05103C4D4_mouse_embyro_Stereo-seq_T_FF1 cm x 2 cmStereo-seq T FF V1.3MouseHealthyEmbryoH&E Stereo-CITE T Fresh Frozen (FF) DatasetChip sizeKit versionSpeciesDisease stateAnatomical tissueStaining methodA02677B5_mouse_thymus_Stereo-CITE1 cm x 1 cmStereo-CITE T FF V1.0MouseHealthyThymusDAPIC04776D6_mouse_spleen_Stereo-CITE1 cm x 1 cmStereo-CITE T FF V1.1MouseHealthySpleenDAPI Stereo-seq N Formalin Fixed & Paraffin Embedded (FFPE) DatasetChip sizeKit versionSpeciesDisease stateAnatomical tissueStaining methodC04144D5_mouse_brain_Stereo-seq_N_FFPE1 cm x 1 cmStereo-seq N FFPE V1.0MouseHealthyBrainssDNAC04138G3_mouse_brain_Stereo-seq_N_FFPE1 cm x 1 cmStereo-seq N FFPE V1.0MouseHealthyBrainH&EC04496D6_mouse_brain_Stereo-seq_N_FFPE1 cm x 1 cmStereo-seq N FFPE V1.0MouseHealthyBrainH&EC04495G4_mouse_lung_microorganism_Stereo-seq_N_FFPE1 cm x 1 cmStereo-seq N FFPE V1.0MouseInfected with Mycobacterium tuberculosisLungH&E © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"support-pages/software-and-kit-compatibility.html":{"url":"support-pages/software-and-kit-compatibility.html","title":"Software and Kit Compatibility","keywords":"","body":"Software and Kit CompatibilitySoftware and Kit Compatibility StereoMap VersionCompatible SoftwareCompatible KitsRelease DateStereoMap 4.2SAW 8.2Same to StereoMap 4.0Jun., 2025StereoMap 4.1SAW 8.1New: Stereo-seq FF V1.2 & V1.3New: Stereo-CITE FF V1.0 & V1.1Others same to StereoMap 4.0Sep., 2024StereoMap 4.0SAW 8.0(ImageStudio has been merged with StereoMap 4.0)New: Stereo-seq FFPE V1.0Stereo-CITE FF V1.0Stereo-seq FF V1.2 (H&E application)Stereo-seq FF LCD V1.0Stereo-seq FF V1.2 (mIF application)Stereo-seq FF V1.2Jun., 2024StereoMap 3.1SAW 7.1ImageStudio 3.0New: Stereo-CITE FF V1.0 Others same to StereoMap 3.0Mar., 2024StereoMap 3.0SAW 7.0ImageStudio 3.0New: Stereo-seq FF V1.2 (H&E application)Stereo-seq FF LCD V1.0Stereo-seq FF V1.2 (mIF application)Stereo-seq FF V1.2Nov, 2023StereoMap 2.1SAW 6.1ImageStudio 2.1New: Stereo-seq FF LCD V1.0Others same to StereoMap 2.0Jul., 2023StereoMap 2.0SAW 6.0ImageStudio 2.0New: Stereo-seq FF V1.2 (mIF application)Stereo-seq FF V1.2Feb., 2023StereoMap 1.0SAW 5.4 & 5.5ImageStudio 1.0Stereo-seq FF V1.2Jan., 2023 © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"},"release-notes/release-notes-for-stereomap.html":{"url":"release-notes/release-notes-for-stereomap.html","title":"Release Notes for StereoMap","keywords":"","body":"Release Notes for StereoMap4.2.0 (June, 2025)4.1.2 (March, 2025)4.1.1 (November, 2024)4.1.0 (September, 2024)4.0.1 (July, 2024)4.0.0 (June, 2024)Release Notes for StereoMap 4.2.0 (June, 2025) Image Processing: Step 1: No need to enter microscope parameters when uploading QC stitched images. Step 2: Added matrix transparency adjustment for morphological registration. Step 4: Added new automatic model segmentation option for cell segmentation. Tools: Image QC no longer requires microscope parameters for stitched images. In DAPI + mIF QC, calibration evaluation results are no longer a deciding factor for QC pass/fail. Removed QC adaptation for multi-channel fluorescence images. 4.1.2 (March, 2025) Resolved an issue where certain spatial feature expression matrix files failed to load in Step 2 of Image Processing. Fixed incomplete display of the heatmap for Bin 1 in Visual Explore. Fixed a bug where deselecting a protein in Stereo-CITE data caused linked windows to omit marker gene displays in Visual Explore. Addressed an error where adjusting expression heatmap opacity incorrectly updated the MID filtering maximum value in Visual Explore. 4.1.1 (November, 2024) To prevent any interruptions, the tooltip information of the spot is be hidden during lasso selection in Visual Explore. Enhanced the user experience when viewing the bin 1 matrix in Visual Explore. The optimized viewing experience is now smoother. Changed the resolution of the feature expression matrix from bin 20 to bin 10 in Step 2 Image Registration of Image Processing. Added the notification displaying the saving path for the registered TIF image during the export process in Step 5 of Image Processing. Adaptation of the new system! The first version of MacOS is released.(December, 2024) 4.1.0 (September, 2024) You can now visually explore the distribution of an individual or selected feature at cell-level resolution. For the Stereo-CITE dataset output by SAW version 8.1.0 or higher, you can easily visualize proteins and their corresponding marker genes in the linked windows. When exporting files from Visual Explore or Image Processing, you’ll be prompted to choose a save location and file name. New image registration method! Align images with the spatial feature expression matrix by marking a specific feature point. There is no need to import the matrix but ensure your image passes QC and the four chip edges or corners are visible. Adds brief instructions to key steps of the Image Processing. The image clarity assessment has been removed from the Image QC process. After the Image QC progression is completed, the saving path information is now included in the QC result suggestion section for improving information delivery. Clicking the path will open the file system and navigate directly to the folder. 4.0.1 (July, 2024) Fixed several known issues. 4.0.0 (June, 2024) New entrance interface for Visual Explore, Image Processing, and Tools. Open one .stereo manifest file in the SAW-generated bundle file for visualizing any datasets. No need to understand the correlation between visualization and the content of each file. Adds functionalities in Visual Explore for manually labeling regions and organizing labels into groups. Select label group and \"Export differential analysis file\" to set parameters export to the differential analysis pipeline in SAW. StereoMap introduces a redesigned Image Processing tool to enable more accurate segmentation of Stereo-seq image data before exporting to SAW. This update includes: New and improved user interface for processing images in a list of recommended steps. Support for uploading segmentation binary .tif image results generated by any applications or algorithms at the tissue segmentation and cell segmentation steps. The uploaded segmentation binary result will be passed into SAW for extracting the tissue/cell matrix. The Image Processing steps also include an image registration step, which allows for manually aligning a Stereo-seq image with a spatial gene expression matrix. Introduction of Image QC tool for evaluating image quality. The image passed QC can be auto-processed by SAW, otherwise, needs to be manually processed using the Image Processing tool. © 2025 STOmics Tech. All rights reserved.Modified: 2025-07-11 11:30:12 document.addEventListener(\"DOMContentLoaded\", function() {lightbox.option({\"resizeDuration\":200,\"wrapAround\":true});})"}}